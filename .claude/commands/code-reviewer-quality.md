---
name: code-reviewer-quality
description: 专业代码质量审查与优化工具，支持代码异味识别、性能分析、安全检查和最佳实践验证。
argument-hint: [代码/模块] [审查类型] [审查深度]
---

# 参数说明

- **代码/模块** (必需): 审查目标，如"用户认证模块"、"支付处理"、"完整项目"等
- **审查类型** (可选): 质量审查、性能审查、安全审查、架构审查、全面审查，默认全面审查
- **审查深度** (可选): 概要审查、详细审查、深度审查、审计级审查，默认详细审查

# 执行步骤

**当前审查目标**: $ARGUMENTS

## 第一阶段：代码分析与准备
工具：sequential-thinking + memory + filesystem

1. 代码环境分析
2. 质量标准建立
3. 审查范围界定

## 第二阶段：深度代码审查
工具：code-reviewer + senior-code-reviewer

1. 代码质量检查
2. 安全性和合规性审查
3. 性能和资源分析

## 第三阶段：问题诊断与分析
工具：sequential-thinking + memory + code-reviewer

1. 问题分类和优先级
2. 根因分析
3. 改进方案设计

## 第四阶段：报告生成与指导
工具：design-doc-writer + sequential-thinking

1. 审查报告生成
2. 重构指导完善
3. 知识沉淀与分享

# Agent 与 MCP 工具

## 主要 Agent
- **code-reviewer** (主导): 代码质量检查、错误识别、最佳实践验证
- **senior-code-reviewer** (深度审查): 深度代码审查、架构验证、性能瓶颈分析
- **design-doc-writer** (报告生成): 审查报告撰写、文档标准化
- **software-architect** (架构支持): 架构审查、重构指导

## MCP 工具
- **sequential-thinking**: 代码质量分析、问题诊断、改进策略
- **memory**: 质量标准查询、最佳实践库、问题模式识别
- **filesystem**: 代码文件扫描、项目结构分析

# 交付件

## 主要报告
1. **代码审查报告**: 完整的审查结果、问题分类、修复建议
2. **问题修复清单**: 详细的问题列表、修复步骤、代码示例
3. **代码质量度量报告**: 质量指标、趋势分析、对比评估
4. **重构建议文档**: 重构策略、实施指导、风险控制

## 报告结构
```markdown
# 代码审查报告：[项目名称]

## 1. 审查概述
### 1.1 审查目标和范围
### 1.2 审查方法和工具
### 1.3 总体质量评估

## 2. 审查结果统计
### 2.1 问题分布统计
### 2.2 严重性分布
### 2.3 质量指标分析

## 3. 关键问题发现
### 3.1 严重问题 (Critical)
### 3.2 高优先级问题 (High)
### 3.3 中等优先级问题 (Medium)

## 4. 改进建议
### 4.1 立即修复建议
### 4.2 短期改进计划
### 4.3 长期质量提升策略
```

# 约束条件

## 审查约束
- **专业性**: 确保审查结果的准确性和专业性
- **完整性**: 覆盖所有重要的代码质量维度
- **建设性**: 提供建设性的改进建议和指导

## 技术约束
- **工具限制**: 依赖静态代码分析工具和质量度量工具
- **分析精度**: 受限于代码复杂度和分析工具能力
- **范围控制**: 控制审查范围和时间成本

# 使用场景

## 适用场景
- **开发阶段审查**: 新功能开发、重构代码、集成测试的代码质量检查
- **发布前审查**: 版本发布、安全审计、性能验收的质量保证
- **维护阶段审查**: 问题修复、技术债务清理、遗留系统现代化
- **团队能力提升**: 代码培训、最佳实践推广、质量文化建设

## 不适用场景
- **架构设计**: 使用 `software-architect-design` 命令
- **代码实现**: 使用 `software-developer-guide` 命令
- **需求分析**: 使用 `software-requirements-analysis` 命令
- **技术选型**: 使用 `tech-selection-analysis` 命令