---
name: godot-debug
description: 专门用于诊断和修复Godot项目中的代码问题，系统化调试流程。
argument-hint: [问题描述]
---

# 参数说明

- **问题描述** (必需): 详细描述遇到的问题，包含：
  - 问题类型：错误信息、异常行为、性能问题、逻辑错误等
  - 出现场景：什么情况下会出现问题
  - 错误信息：完整的错误日志和堆栈跟踪
  - 重现步骤：如何重现该问题的具体步骤

# 执行步骤

**当前调试问题**: $ARGUMENTS

## 第一阶段：问题收集与初步诊断
工具：godot + filesystem + sequential-thinking

1. 环境信息收集
2. 错误信息分析
3. 问题分类与优先级评估

## 第二阶段：深度问题诊断
工具：godot + sequential-thinking + memory

1. 运行时调试
2. 代码逻辑分析
3. 系统状态诊断

## 第三阶段：解决方案制定
工具：sequential-thinking + memory + tavily-mcp

1. 根本原因分析
2. 解决方案设计
3. 技术验证

## 第四阶段：修复实施与验证
工具：filesystem + godot + sequential-thinking

1. 修复方案实施
2. 修复效果验证
3. 回归测试与优化

# Agent 与 MCP 工具

## 主要 Agent
- **godot-code-reviewer** (主导): 专业代码审查、错误调试分析、代码质量保证
- **godot-architect** (技术支持): 架构问题诊断、系统设计优化
- **godot-game-developer** (实施支持): 代码修改实施、功能测试验证

## MCP 工具
- **godot**: 项目运行、调试输出获取、状态监控
  - `get_project_info`: 获取项目元数据和配置信息
  - `run_project`: 运行项目并监控调试输出
  - `get_debug_output`: 获取实时调试信息
- **filesystem**: 代码文件扫描、项目结构分析
- **sequential-thinking**: 复杂问题分析、解决方案设计
- **memory**: 常见问题查询、最佳实践应用
- **tavily-mcp**: 技术方案搜索、解决方案验证

# 交付件

## 主要报告
1. **问题诊断报告**: 问题描述、分类分析、调试策略
2. **深度调试分析报告**: 根因分析、代码执行分析、系统状态分析
3. **解决方案设计文档**: 详细解决方案、实施步骤、风险评估
4. **修复实施记录**: 代码修改记录、测试结果、效果评估

## 报告结构
```markdown
# Godot问题诊断报告：[问题描述]

## 1. 问题基本信息
- **问题描述**: [详细问题描述]
- **问题类型**: [错误/性能/逻辑等]
- **严重程度**: [高/中/低]
- **影响范围**: [影响的功能模块]

## 2. 初步诊断
### 2.1 问题分类
### 2.2 可能原因分析
### 2.3 调试策略

## 3. 解决方案
### 3.1 根本原因
### 3.2 修复方案
### 3.3 验证方法
```

# 约束条件

## 调试约束
- **分析精度**: 快速分析可能遗漏某些细节
- **上下文**: 缺少完整项目上下文时分析可能不够全面
- **影响范围**: 对大范围变更的评估可能不够全面

## 技术约束
- **工具限制**: 受限于当前可用的调试工具和功能
- **信息获取**: 只能获取程序愿意暴露的调试信息
- **实时性**: 实时调试的性能开销和准确性平衡

# 使用场景

## 适用场景
- **开发阶段调试**: 新功能开发、集成测试、性能优化
- **测试阶段调试**: Bug修复、兼容性测试、压力测试
- **维护阶段调试**: 线上问题、版本升级、性能衰退、安全加固
- **学习研究场景**: 技术调研、问题研究、最佳实践

## 不适用场景
- **非技术问题**: 产品设计、项目管理、商业决策
- **硬件相关问题**: 设备故障、驱动问题、网络故障
- **恶意代码分析**: 病毒分析、安全攻击、逆向工程

# 命令限制说明

此命令专注于Godot项目的技术调试和问题解决，不涉及：

- **代码实现**: 使用 `godot-game-developer` 命令
- **架构设计**: 使用 `godot-architect` 命令
- **性能优化**: 使用 `godot-code-reviewer` 命令
- **文档生成**: 使用 `godot-gen-doc` 命令