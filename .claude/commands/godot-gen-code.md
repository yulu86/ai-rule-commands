---
name: godot-gen-code
description: 采用人机协作方式完成Godot项目编码任务，通过智能任务分解确保质量。
argument-hint: [编码任务描述]
---

# 参数说明

- **编码任务描述** (必需): 详细描述需要实现的编码任务，包含：
  - **功能需求**: 具体要实现的功能和特性
  - **技术要求**: Godot版本、目标平台、性能要求
  - **设计约束**: 代码风格、架构模式、现有集成要求
  - **验收标准**: 功能完成的验收条件和测试要求

# 执行步骤

**当前编码目标**: $ARGUMENTS

## 第一阶段：需求分析与架构设计
工具：sequential-thinking + memory + filesystem

1. 需求解析与分析
2. 技术方案设计
3. 任务分解与规划

## 第二阶段：详细设计与代码规划
工具：memory + filesystem + sequential-thinking

1. 代码架构设计
2. 实现策略制定
3. 质量标准定义

## 第三阶段：代码生成与实现
工具：godot-game-developer + filesystem

1. 核心代码生成
2. 配套代码开发
3. 代码集成与优化

## 第四阶段：测试验证与质量保证
工具：godot + godot-code-reviewer + sequential-thinking

1. 功能测试验证
2. 代码质量审查
3. 性能优化与完善

# Agent 与 MCP 工具

## 主要 Agent
- **godot-game-developer** (主导): 专业Godot代码实现、功能开发、性能优化
- **godot-architect** (架构设计): 系统架构设计、代码结构规划
- **godot-code-reviewer** (质量保证): 代码质量检查、性能分析、错误识别

## MCP 工具
- **godot**: 场景创建、节点管理、项目运行测试
  - `create_scene`: 创建新的场景文件和结构
  - `add_node`: 向场景添加节点和组件
  - `run_project`: 运行项目并监控调试输出
- **filesystem**: 代码文件创建、编辑、组织
- **sequential-thinking**: 代码架构设计、实现策略分析、性能调优
- **memory**: 查询Godot编程知识和最佳实践

# 交付件

## 主要文档
1. **需求分析与设计方案**: 详细的需求分析、技术方案、系统架构设计
2. **详细实现规范**: 代码规范、文件结构、实现标准
3. **完整代码实现**: 脚本文件、场景文件、资源文件
4. **测试验证报告**: 功能测试结果、性能测试数据、集成测试验证
5. **技术文档与使用指南**: 实现说明、API文档、配置指南

## 代码结构
```gdscript
# 核心脚本示例
extends [节点类型]
class_name "[脚本名称]"
func _ready():
    # 初始化代码
    pass

func [核心方法](参数):
    # 功能实现
    pass

func _helper_method():
    # 辅助方法
    pass
```

# 约束条件

## 实现约束
- **代码质量**: 确保生成代码符合Godot最佳实践
- **技术可行性**: 所有设计必须在现有技术条件下可实现
- **集成要求**: 新代码必须与现有项目兼容

## 技术约束
- **Godot版本**: 基于指定的Godot版本进行实现
- **平台兼容**: 考虑目标平台的特性和限制
- **性能要求**: 满足指定的性能指标和要求

## 使用约束
- **需求明确**: 用户必须提供明确和完整的功能需求
- **协作过程**: 用户需要及时提供反馈和确认
- **验证责任**: 用户需要验证生成的代码质量

# 使用场景

## 适用场景
- **新功能开发**: 核心机制、系统功能、界面功能、工具功能
- **功能扩展**: 现有功能增强、性能优化、平台适配、版本升级
- **代码重构**: 架构改进、模块化、标准化、可维护性提升
- **原型开发**: 概念验证、技术预研、演示原型、实验项目

## 不适用场景
- **游戏设计**: 使用 `godot-game-design` 命令
- **架构设计**: 使用 `godot-architect` 命令
- **代码审查**: 使用 `godot-code-reviewer` 命令
- **文档生成**: 使用 `godot-gen-doc` 命令

# 特殊约束

## 输出约束
- **禁止输出完整代码实现**: 只输出设计文档和指导
- **禁止输出详细代码**: 设计文档中可以包含代码示例和伪代码

## 交付重点
- **设计导向**: 专注于技术设计和实现指导
- **质量保证**: 确保代码质量标准和最佳实践
- **人机协作**: 强调与用户协作的编码过程