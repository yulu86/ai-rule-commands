---
name: godot-gen-doc
description: 根据指定主题智能生成Godot游戏设计文档，支持概要和详细两种模式。该命令专注于功能规划、系统设计和技术方案文档化，能够生成专业的游戏设计文档(GDD)、技术架构文档和开发指南，为游戏开发团队提供完整的文档支持。
argument-hint: [主题/特性] [概要/详细]
---

# 命令参数说明

- **主题/特性** (必需): 指定文档生成的主题，可以是：
  - **整体项目**: 生成完整项目的综合设计文档
  - **特定系统**: 如 "战斗系统"、"存档系统"、"任务系统"、"UI系统"等
  - **核心功能**: 如 "玩家控制"、"敌人AI"、"物品系统"、"技能系统"等
  - **技术架构**: 如 "场景架构"、"脚本组织"、"资源管理"、"网络同步"等
  - **设计概念**: 如 "游戏机制"、"关卡设计"、"平衡性设计"、"叙事系统"等

- **详细程度** (可选): 指定文档的详细程度
  - **概要模式**: 生成高层次的设计概述和关键要点，适合快速了解和概念验证
  - **详细模式**: 生成完整详细的设计文档，包含具体实现指导和技术细节
  - **默认值**: 如未指定，默认为详细模式

# 执行步骤

## 第一阶段：需求分析与资料收集
### 工具使用：sequential-thinking + memory + tavily-mcp

1. **主题解析与范围界定** (使用 sequential-thinking 工具)
   - 深度分析文档主题的核心内容和边界
   - 确定文档的目标受众和使用场景
   - 分析与项目其他部分的关联关系
   - 制定文档的结构和内容框架

2. **知识收集与研究** (使用 memory + tavily-mcp 工具)
   - 查询相关的游戏设计知识和最佳实践
   - 搜索同类系统的设计案例和技术方案
   - 收集最新的技术趋势和行业标准
   - 分析成功案例的设计思路和实现方式

3. **设计标准确立** (使用 sequential-thinking 工具)
   - 确定文档的质量标准和详细程度
   - 制定设计原则和技术约束条件
   - 定义验收标准和评估指标
   - 规划文档的版本控制和维护策略

## 第二阶段：内容规划与架构设计
### 工具使用：design-doc-writer + sequential-thinking

1. **文档架构设计** (使用 design-doc-writer Agent)
   - 设计文档的整体结构和章节组织
   - 确定各部分的详细程度和侧重点
   - 规划图表、示例和案例分析的位置
   - 制定文档的导航和索引策略

2. **内容深度规划** (使用 sequential-thinking 工具)
   - 根据详细程度要求规划内容深度
   - 平衡理论指导和实践操作的内容比例
   - 确定技术细节的阐述程度
   - 规划扩展内容和高级主题的组织

3. **技术方案设计** (使用 sequential-thinking 工具)
   - 设计具体的技术实现方案
   - 分析不同技术方案的优缺点
   - 考虑技术选型的兼容性和扩展性
   - 制定技术验证和测试策略

## 第三阶段：文档生成与内容创建
### 工具使用：design-doc-writer + godot-architect + memory

1. **核心内容生成** (使用 design-doc-writer Agent)
   - 生成主要的设计内容和技术说明
   - 创建系统架构和功能设计描述
   - 编写用户交互和体验设计规范
   - 制作实现指导和最佳实践说明

2. **技术架构文档** (使用 godot-architect Agent)
   - 生成详细的技术架构文档
   - 创建系统设计和模块划分说明
   - 编写接口定义和数据结构设计
   - 制作性能优化和扩展性指导

3. **实践指导完善** (使用 memory 工具)
   - 添加代码示例和实现案例
   - 完善配置指南和部署说明
   - 创建故障排除和维护指南
   - 补充相关的参考资料和资源链接

## 第四阶段：质量保证与优化
### 工具使用：design-doc-writer + sequential-thinking

1. **文档质量审查** (使用 design-doc-writer Agent)
   - 检查文档的结构完整性和逻辑一致性
   - 验证技术内容的准确性和可行性
   - 优化语言表达和文档可读性
   - 确保符合标准化格式和规范

2. **用户体验优化** (使用 sequential-thinking 工具)
   - 优化文档的导航和查找体验
   - 改进图表和示例的清晰度
   - 增强文档的实用性和操作性
   - 考虑不同用户群体的阅读需求

3. **完整性验证** (使用 sequential-thinking 工具)
   - 验证文档覆盖范围的完整性
   - 检查重要概念和技术点的说明
   - 确认实现指导的可操作性
   - 评估文档的维护和更新需求

# Agent 与 MCP 工具指定

## 主要执行 Agent

### design-doc-writer (主导 Agent)
- **使用阶段**: 第二阶段架构设计、第三阶段内容生成、第四阶段质量保证
- **核心职责**: 文档结构设计、内容组织、技术文档撰写、格式标准化
- **专业能力**: 技术文档写作、GDD标准化、内容结构化、知识组织
- **主要工具**:
  - `filesystem`: 文档创建、编辑、格式处理
  - `sequential-thinking`: 文档结构设计、内容规划、质量优化
  - `memory`: 文档模板查询、标准格式应用、知识整合

### godot-architect (技术架构支持 Agent)
- **使用阶段**: 第三阶段技术文档生成
- **触发条件**: 需要技术架构和系统设计文档时
- **核心职责**: 技术架构设计、系统方案规划、技术可行性分析
- **专业能力**: Godot架构设计、SOLID原则应用、性能优化、系统设计
- **主要工具**:
  - `sequential-thinking`: 技术方案分析、架构决策、优化策略
  - `memory`: Godot最佳实践、架构模式、技术标准查询

### godot-game-designer (游戏设计支持 Agent)
- **使用阶段**: 第一阶段需求分析、第三阶段游戏机制设计
- **触发条件**: 涉及游戏机制、用户体验、玩法设计时
- **核心职责**: 游戏机制设计、用户体验规划、玩法系统设计
- **专业能力**: 游戏创意构思、核心机制设计、用户心理分析
- **主要工具**:
  - `sequential-thinking`: 游戏机制分析、用户体验设计、平衡性规划
  - `tavily-mcp`: 市场趋势分析、竞品研究、设计案例收集
  - `memory`: 游戏设计知识、成功案例分析、设计模式查询

## MCP 工具使用策略

### 1. sequential-thinking 工具
- **使用时机**: 第一阶段需求分析、第二阶段架构设计、第四阶段质量优化
- **具体用途**:
  - 深度分析文档主题和用户需求
  - 设计合理的文档结构和内容框架
  - 分析技术方案的可行性和优劣
  - 优化文档的表达方式和使用体验
- **思考深度**: 根据文档复杂度和详细程度调整分析深度

### 2. memory 工具
- **使用时机**: 第一阶段知识收集、第三阶段内容完善、全程知识支持
- **具体用途**:
  - 查询游戏设计和技术文档的标准模板
  - 收集相关的最佳实践和成功案例
  - 存储重要的设计决策和技术方案
  - 建立文档主题的知识关联和分类
- **记忆策略**: 为每个文档主题建立独立的知识库

### 3. tavily-mcp 工具
- **使用时机**: 第一阶段资料收集、第三阶段案例分析
- **具体用途**:
  - 搜索最新的游戏设计趋势和技术发展
  - 收集同类系统的设计案例和实现经验
  - 查询行业标准和规范要求
  - 获取技术方案的最新研究成果
- **搜索策略**: 使用主题关键词+设计概念+最新趋势进行搜索

### 4. filesystem 工具
- **使用时机**: 第三阶段文档生成、第四阶段质量审查、全程文件管理
- **具体用途**:
  - 创建和编辑文档文件
  - 组织文档的结构和格式
  - 管理相关的资源和示例文件
  - 生成不同格式的文档输出
- **操作策略**: 遵循文档管理规范和版本控制要求

# 交付件说明

## 主要交付物清单

### 1. 游戏设计文档 (Game Design Document)
**文件名格式**: `gdd_[主题]_[详细程度]_[日期].md`

**包含内容**:
- 完整的游戏设计概念和机制说明
- 核心玩法和系统设计详细描述
- 用户体验和交互设计规范
- 关卡设计和内容创作指导

**文档结构**:
```markdown
# 游戏设计文档：[文档主题]

## 1. 游戏概述
### 1.1 游戏概念和定位
### 1.2 核心玩法设计
### 1.3 目标受众分析
### 1.4 独特卖点设计

## 2. 核心机制设计
### 2.1 基础玩法机制
### 2.2 核心循环设计
### 2.3 规则和条件设定
### 2.4 平衡性考虑

## 3. 系统功能设计
### 3.1 进程系统
### 3.2 奖励机制
### 3.3 社交功能
### 3.4 经济系统

## 4. 用户体验设计
### 4.1 UI/UX设计原则
### 4.2 交互流程设计
### 4.3 反馈系统设计
### 4.4 新手引导设计

## 5. 内容设计规范
### 5.1 关卡设计原则
### 5.2 内容创作指导
### 5.3 叙事设计
### 5.4 美术风格指导
```

### 2. 技术架构文档 (Technical Architecture Document)
**文件名格式**: `tech_arch_[主题]_[详细程度]_[日期].md`

**包含内容**:
- 详细的技术架构和设计方案
- 系统模块划分和接口设计
- 数据结构和算法设计
- 性能优化和扩展性考虑

**文档结构**:
```markdown
# 技术架构文档：[文档主题]

## 1. 架构概述
### 1.1 整体架构设计
### 1.2 设计原则和目标
### 1.3 技术选型理由
### 1.4 架构优势分析

## 2. 系统设计
### 2.1 模块划分策略
### 2.2 接口设计规范
### 2.3 数据流设计
### 2.4 通信机制设计

## 3. 详细设计
### 3.1 核心类设计
### 3.2 关键算法设计
### 3.3 数据结构选择
### 3.4 存储策略设计

## 4. 技术实现
### 4.1 关键技术实现
### 4.2 性能优化策略
### 4.3 错误处理机制
### 4.4 安全性考虑

## 5. 扩展性和维护
### 5.1 扩展点设计
### 5.2 配置管理
### 5.3 监控和调试
### 5.4 版本兼容性
```

### 3. 开发指导文档 (Development Guide)
**文件名格式**: `dev_guide_[主题]_[详细程度]_[日期].md`

**包含内容**:
- 详细的开发流程和实施指导
- 代码示例和最佳实践
- 测试策略和质量保证
- 部署和维护指南

**文档结构**:
```markdown
# 开发指导文档：[文档主题]

## 1. 开发环境准备
### 1.1 环境要求
### 1.2 工具配置
### 1.3 项目设置
### 1.4 依赖管理

## 2. 开发流程
### 2.1 开发阶段规划
### 2.2 编码规范
### 2.3 代码审查流程
### 2.4 测试策略

## 3. 实现指导
### 3.1 核心功能实现
### 3.2 代码示例
### 3.3 最佳实践
### 3.4 常见问题解决

## 4. 质量保证
### 4.1 代码质量标准
### 4.2 测试方法
### 4.3 性能评估
### 4.4 安全检查

## 5. 部署和维护
### 5.1 部署流程
### 5.2 监控和维护
### 5.3 故障排除
### 5.4 更新和升级
```

### 4. 项目管理文档 (Project Management Document)
**文件名格式**: `pm_guide_[主题]_[详细程度]_[日期].md`

**包含内容**:
- 项目规划和里程碑设置
- 团队组织和角色分工
- 风险管理和应对策略
- 时间和资源管理

**文档结构**:
```markdown
# 项目管理文档：[文档主题]

## 1. 项目规划
### 1.1 项目目标
### 1.2 范围界定
### 1.3 里程碑设置
### 1.4 成功标准

## 2. 团队组织
### 2.1 角色分工
### 2.2 技能要求
### 2.3 协作流程
### 2.4 沟通机制

## 3. 资源管理
### 3.1 时间规划
### 3.2 人力配置
### 3.3 技术资源
### 3.4 预算控制

## 4. 风险管理
### 4.1 风险识别
### 4.2 影响评估
### 4.3 应对策略
### 4.4 监控机制

## 5. 质量控制
### 5.1 质量标准
### 5.2 审查流程
### 5.3 测试计划
### 5.4 改进机制
```

### 5. 概要设计文档 (Executive Summary)
**文件名格式**: `summary_[主题]_概要_[日期].md`

**包含内容**:
- 高层次的设计概述和关键决策
- 核心特性和创新点总结
- 实施要点和成功因素
- 风险评估和资源需求

**文档结构**:
```markdown
# 概要设计文档：[文档主题]

## 1. 执行摘要
### 1.1 项目概述
### 1.2 核心价值
### 1.3 关键创新
### 1.4 成功要素

## 2. 设计概要
### 2.1 核心概念
### 2.2 主要特性
### 2.3 技术路线
### 2.4 差异化优势

## 3. 实施要点
### 3.1 关键里程碑
### 3.2 资源需求
### 3.3 风险评估
### 3.4 成功指标

## 4. 下一步行动
### 4.1 立即行动项
### 4.2 短期目标
### 4.3 长期规划
### 4.4 支持需求
```

## 实时文档生成支持

### 生成进度跟踪
**实时输出**: 在对话中提供实时的文档生成进度和内容预览

**包含内容**:
- 当前文档生成阶段和完成进度
- 重要章节和内容点的生成状态
- 遇到的设计决策和技术选择
- 下一步生成内容和优化建议

**输出格式**:
```markdown
## 📝 文档生成进度报告
**当前阶段**: [具体生成阶段]
**完成度**: [百分比]%
**文档类型**: [生成的文档类型]

## 📚 内容生成状态
- **已完成章节**: [已完成的章节列表]
- **进行中内容**: [正在生成的章节内容]
- **待开始部分**: [待生成的章节和内容]

## 🎯 重要设计决策
- **架构选择**: [重要的架构设计决策]
- **技术方案**: [选定的技术实现方案]
- **设计原则**: [采用的设计原则和标准]
- **创新点**: [文档中的创新设计点]

## 📋 下一步计划
1. [下一步要生成的章节内容]
2. [需要重点说明的技术点]
3. [需要补充的示例和案例]
4. [质量检查和优化计划]
```

# 约束与限制条件

## 生成内容约束

### 专业性约束
- **技术准确性**: 确保技术内容的准确性和可行性
- **设计合理性**: 设计方案必须符合游戏设计原理和最佳实践
- **实现可行性**: 所有建议的方案必须在现有技术条件下可实现
- **行业标准**: 遵循游戏行业的技术标准和规范要求

### 创新性约束
- **原创性要求**: 文档应包含原创的设计思路和技术方案
- **差异化设计**: 避免简单复制现有的设计方案
- **适应性考虑**: 设计方案应考虑项目的特定需求和环境
- **前瞻性思维**: 设计应考虑未来的技术发展和趋势

### 完整性约束
- **内容覆盖**: 确保覆盖主题的所有重要方面
- **逻辑一致**: 文档内部保持逻辑一致性和连贯性
- **细节平衡**: 根据详细程度要求平衡内容的深度和广度
- **可操作性**: 提供的操作指导应具有实际可执行性

## 技术约束条件

### Godot引擎约束
- **版本兼容**: 基于指定的Godot版本进行文档设计
- **功能限制**: 考虑Godot引擎的功能限制和能力边界
- **性能特征**: 考虑Godot引擎的性能特征和优化要点
- **平台特性**: 考虑目标平台的特性和限制条件

### 实现复杂度约束
- **技术难度**: 控制技术方案的复杂度和实现难度
- **开发成本**: 考虑实现方案的开发成本和时间投入
- **维护成本**: 评估长期维护和扩展的成本
- **团队技能**: 考虑开发团队的技术能力和经验水平

### 扩展性约束
- **模块化设计**: 采用模块化的设计思路便于扩展
- **接口标准化**: 设计标准化的接口和协议
- **配置灵活性**: 提供灵活的配置和定制选项
- **版本兼容**: 考虑向前和向后的兼容性

## 使用约束条件

### 需求明确性约束
- **主题清晰**: 文档主题必须清晰明确
- **目标明确**: 文档目标和使用场景必须明确
- **受众定位**: 目标受众和使用者必须明确定位
- **详细程度**: 文档的详细程度要求必须明确指定

### 应用范围约束
- **项目适配**: 生成的文档需要适配具体项目需求
- **团队适配**: 考虑开发团队的技能水平和工作习惯
- **环境适配**: 考虑开发环境和工具链的特点
- **标准适配**: 符合团队或公司的文档标准和规范

### 验证责任约束
- **技术验证**: 用户需要验证技术方案的可行性
- **实现测试**: 建议通过原型验证关键设计方案
- **团队确认**: 重要设计决策需要团队确认和认可
- **持续更新**: 项目变更时需要及时更新文档

## 伦理约束条件

### 知识产权约束
- **原创尊重**: 尊重他人的知识产权和设计成果
- **引用规范**: 遵循学术和商业引用规范
- **许可合规**: 确保引用内容的许可证兼容性
- **商业机密**: 保护用户的商业机密和敏感信息

### 专业责任约束
- **质量承诺**: 对生成的文档质量承担专业责任
- **能力透明**: 透明地展示能力范围和限制
- **持续改进**: 基于反馈持续改进文档生成质量
- **建议客观**: 提供客观中立的设计建议和意见

# 使用场景与最佳实践

## 适用场景

### 新项目启动
- **项目立项**: 为新项目生成完整的设计文档
- **投资演示**: 制作用于投资和合作演示的设计文档
- **团队组建**: 为新组建的团队提供设计指导和技术规范
- **技术选型**: 为技术选型提供详细的分析和决策支持

### 功能规划阶段
- **系统设计**: 为新功能系统设计详细的技术方案
- **架构规划**: 规划项目的技术架构和模块划分
- **接口设计**: 设计模块间的接口和数据交换协议
- **性能规划**: 制定性能目标和优化策略

### 开发过程
- **技术指导**: 为开发过程提供详细的技术指导
- **标准建立**: 建立团队的编码规范和开发标准
- **知识传递**: 促进团队间的知识传递和技术共享
- **质量保证**: 建立质量保证流程和评估标准

### 项目维护
- **文档更新**: 为现有项目更新和完善技术文档
- **知识整理**: 整理和结构化项目的技术知识
- **新人培训**: 为新加入的团队成员提供培训材料
- **技术迁移**: 为技术迁移和升级提供指导文档

## 不适用场景

### 具体实现
- **代码编写**: 不是直接的代码实现工具
- **美术创作**: 不涉及美术资源和视觉设计创作
- **音效制作**: 不包含音频和音效的制作指导
- **测试执行**: 不执行具体的测试和验证工作

### 商业决策
- **市场分析**: 不进行深入的市场分析和商业评估
- **用户研究**: 不替代用户研究和需求调研
- **竞品分析**: 不作为主要的竞品分析工具
- **商业模式**: 不制定商业模式和盈利策略

### 法律合规
- **合同审核**: 不审核法律合同和协议
- **专利申请**: 不处理专利相关的法律事务
- **合规审查**: 不进行法律合规性审查
- **风险评估**: 不评估商业和法律风险

## 最佳实践指南

### 需求定义优化

#### 主题明确化
- **具体范围**: 使用具体和明确的语言定义文档主题范围
- **目标导向**: 明确文档的主要目标和使用场景
- **受众分析**: 清晰定义文档的目标受众群体
- **期望管理**: 合理设定对文档质量和深度的期望

#### 详细程度选择
- **概要模式**: 适用于快速概念验证、投资演示、团队共识建立
- **详细模式**: 适用于具体开发指导、技术实施、完整项目文档
- **混合模式**: 针对不同章节采用不同的详细程度
- **渐进细化**: 从概要开始，逐步细化为详细文档

### 文档生成优化

#### 结构设计
- **层次清晰**: 采用清晰的层次结构和逻辑组织
- **导航便利**: 提供完善的目录、索引和交叉引用
- **模块化**: 将大型文档分解为逻辑清晰的模块
- **标准化**: 使用标准化的文档格式和表达方式

#### 内容质量
- **准确性优先**: 确保技术内容和建议的准确性
- **实用性导向**: 强调内容的实用性和可操作性
- **示例丰富**: 提供丰富的代码示例和实现案例
- **图表支持**: 使用图表、流程图等可视化方式说明复杂概念

### 应用效果优化

#### 团队协作
- **参与机制**: 邀请相关团队成员参与文档生成过程
- **反馈收集**: 收集团队对文档内容的反馈和建议
- **共识建立**: 通过文档建立团队的技术共识和标准
- **知识共享**: 促进团队间的知识共享和技术交流

#### 持续改进
- **使用跟踪**: 跟踪文档的实际使用情况和效果
- **版本管理**: 建立文档的版本管理和更新机制
- **质量评估**: 定期评估文档质量和实用性
- **标准优化**: 基于使用反馈优化文档生成标准

# 命令执行限制说明

**重要提醒**: 此命令专注于高质量的文档生成和设计规划，不涉及具体的代码实现或美术创作。如需要以下服务，请使用对应的专业命令：

- **代码实现**: 使用 `godot-gen-code` 命令进行功能开发和代码实现
- **架构设计**: 使用 `godot-architect` 命令进行深度架构设计
- **游戏设计**: 使用 `godot-game-design` 命令进行创意游戏设计
- **代码审查**: 使用 `godot-code-reviewer` 命令进行代码质量审查
- **逆向文档**: 使用 `godot-gen-doc-reverse` 命令从现有代码生成文档