---
name: godot-gen-doc
description: Godot 游戏特性设计文档生成器
argument-hint: "[主题|特性] [概要|详细]"
---

## 功能说明

根据指定的主题或特性，智能生成 Godot 游戏设计文档。支持概要设计和详细设计两种模式，适用于新功能规划、系统设计和技术方案文档化。

## 执行步骤

1. **参数验证**：
   - 检查用户是否提供了主题和详细程度参数
   - 参数格式：`[主题/特性名称] [概要/详细]`
   - 如未提供参数，提示用户输入必要信息

2. **项目信息收集**：
   - @godot-architect 读取项目配置文件 CLAUDE.md，掌握项目基本信息 use context7
   - 分析项目现有架构和技术栈，确保新设计与项目整体风格一致 
   - 如存在相关代码，读取现有代码以理解当前实现状态

3. **需求分析与方案设计**：
   - @godot-architect 深入分析主题 $1 的需求和目标
   - 考虑技术可行性、性能要求、用户体验等多个维度
   - 设计至少两个不同的实现方案，每个方案都有其独特的优势和适用场景

4. **方案对比与选择**：
   - @godot-architect 为每个备选方案提供简洁的一句话描述
   - 以选项形式向用户展示各方案的核心特点和价值
   - 等待用户选择最终方案，如用户不满意可重新设计

5. **文档生成**：
   - @design-doc-writer 根据用户选择的方案，按照 $2 的要求生成设计文档
   - **概要模式**：专注于功能描述、系统架构、核心流程等高层设计
   - **详细模式**：包含具体的代码设计、接口定义、数据结构等技术细节

## 文档组织规范

### 输出路径
```
/docs/02_特性设计/{两位数字编号}_{特性名称}.md
```

### 文档结构

#### 概要设计文档应包含：
- **功能概述**：特性的核心价值和主要功能点
- **用户场景**：典型的使用场景和用户故事
- **系统架构**：高层次的架构设计和组件关系
- **核心流程**：主要业务流程和交互逻辑
- **技术要点**：关键技术和实现难点分析

#### 详细设计文档应包含：
- **设计背景**：详细的需求分析和设计目标
- **架构设计**：完整的系统架构和模块划分
- **接口设计**：详细的 API 接口和数据结构定义
- **实现方案**：具体的算法设计和代码结构规划
- **性能考虑**：性能优化策略和资源管理方案
- **扩展性设计**：未来的扩展方向和兼容性考虑

### 命名规范
- **文件名**：使用中文命名，如 `01_战斗系统.md`、`02_角色控制.md`
- **编号规则**：使用两位数字编号，便于文档排序和管理