---
name: quick-commit
description: 快速Git自动提交命令，自动检测代码变更、生成符合规范的commit message并执行提交
---

智能Git自动提交工具

自动检测代码变更，智能生成符合规范的commit message并执行提交。专注于速度和准确性，避免任何无关的签名信息。

## 功能特点

- **快速状态检测**：使用git status --porcelain获取所有变更状态
- **自动暂存处理**：检测到未暂存变更时自动执行git add .
- **智能commit message生成**：根据文件类型和操作类型生成中文描述
- **符合规范**：生成符合Git commit message规范的提交信息
- **错误处理**：完整的异常处理和用户反馈

## 执行流程

1. **检查Git仓库**：确认当前目录是Git仓库
2. **获取变更状态**：分析已暂存、未暂存和未跟踪文件
3. **文件类型分析**：根据文件扩展名识别文件用途
4. **操作类型映射**：
   - `A` (新增) → "添加/新增"
   - `M` (修改) → "更新/修改/优化"
   - `D` (删除) → "删除/清理"
   - `R` (重命名) → "重命名"
5. **生成commit message**：基于分析结果生成合适的提交信息
6. **执行提交**：使用生成的message执行git commit

## 使用示例

```bash
/commit
```

## Commit Message规范

### 基本格式
```
<type>: <subject>

# 示例
feat: 添加用户登录功能
fix: 修复按钮点击无响应问题
refactor: 重构用户管理模块
docs: 更新API文档
```

### 推荐动词
- **添加类**：添加、新增、引入、实现
- **修改类**：更新、修改、优化、调整、重构、改进
- **修复类**：修复、解决、完善
- **删除类**：删除、清理、移除
- **文档类**：完善、更新、添加

### 长度限制
- 标题：不超过72字符
- 超长时自动截断处理

## 特殊情况处理

- **无变更场景**：返回"没有需要提交的变更"
- **仅格式化变更**：使用"代码格式化和清理"
- **配置文件变更**：使用"更新项目配置和设置"
- **大规模重构**：使用描述性汇总如"代码重构和功能优化，涉及X个文件"

## 文件类型识别

根据文件扩展名智能识别文件类型：
- `.py` → Python文件
- `.js` → JavaScript文件
- `.ts` → TypeScript文件
- `.jsx/.tsx` → React组件
- `.css/.scss` → 样式文件
- `.html` → HTML页面
- `.md` → 文档
- `.json/.yml/.yaml` → 配置文件
- `.sql` → SQL脚本
- `.sh/.bat` → 脚本文件

## 质量保证

### 避免的内容
- ❌ Co-authored信息
- ❌ 时间戳和版本号
- ❌ 无意义的描述（"update"、"fix"）
- ❌ 工具签名

### 提交信息示例
✅ 正确示例：
- "feat: 添加用户登录验证功能"
- "fix: 修复商品页面响应式布局问题"
- "update: 更新数据库连接池配置"
- "refactor: 优化订单查询性能"
- "refactor: 重构支付模块代码结构"

## 限制说明

- 仅支持Git仓库操作
- 需要Git已正确配置用户信息
- 不处理合并冲突等复杂Git操作
- git commit message禁止出现```🤖 Generated with [Claude Code](https://claude.com/claude-code)

   Co-Authored-By: Claude <noreply@anthropic.com>
```
