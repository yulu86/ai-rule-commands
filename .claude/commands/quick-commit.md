---
name: quick-commit
description: 快速智能分析项目代码变更，自动生成符合规范的commit消息。该命令专注于快速Git提交、变更记录和版本管理，通过简化流程快速分析代码变更内容、影响范围和修改意图，生成规范、简洁、实用的Git commit消息，适用于快速开发和迭代场景。
---

# 命令参数说明

- **简单描述** (可选): 提供一个简单的描述来指导commit消息生成，可以是：

  **快速类型**:
  - **f/feat**: 新功能 (feature)
  - **x/fix**: 修复bug (bug fix)
  - **d/docs**: 文档变更 (documentation)
  - **s/style**: 代码格式化 (formatting)
  - **r/refactor**: 代码重构 (refactor)
  - **p/perf**: 性能优化 (performance)
  - **t/test**: 测试相关 (tests)
  - **c/chore**: 构建或工具变更 (maintain)

  **简单描述**:
  - **功能描述**: 如 "登录"、"动画"、"UI"等关键词
  - **修复描述**: 如 "崩溃"、"卡顿"、"错误"等关键词
  - **优化描述**: 如 "速度"、"内存"、"性能"等关键词
  - **自定义**: 任何描述变更性质的关键词

# 执行步骤

## 快速分析阶段
### 工具使用：Bash + sequential-thinking

1. **Git状态快速检查** (使用 Bash 工具)
   - 执行 `git status` 查看工作区状态
   - 快速识别变更文件数量和类型
   - 检查是否有未暂存的重要变更
   - 分析当前分支状态

2. **变更内容快速扫描** (使用 Bash 工具)
   - 执行 `git diff --name-only` 获取变更文件列表
   - 执行 `git diff --stat` 获取变更统计信息
   - 快速扫描核心文件的变更内容
   - 识别主要变更模式和类型

3. **意图快速推断** (使用 sequential-thinking 工具)
   - 根据文件扩展名和路径推断变更类型
   - 基于变更模式快速判断主要目的
   - 确定最合适的commit类型和范围
   - 生成简洁准确的变更描述

## 消息生成阶段
### 工具使用：sequential-thinking

1. **类型自动确定** (使用 sequential-thinking 工具)
   - 基于文件变更自动选择commit类型
   - 根据参数提示调整类型选择
   - 确保类型与变更内容匹配
   - 优化类型的准确性

2. **标题快速生成** (使用 sequential-thinking 工具)
   - 生成简洁明了的commit标题
   - 确保标题包含核心变更信息
   - 控制标题长度在合理范围内
   - 使用统一的语言和术语

3. **描述优化** (使用 sequential-thinking 工具)
   - 为复杂变更添加简要说明
   - 包含必要的上下文信息
   - 确保描述的准确性和实用性
   - 优化可读性和搜索性

## 输出执行阶段
### 工具使用：Bash

1. **命令生成** (使用 Bash 工具)
   - 生成可直接使用的git add命令
   - 生成格式化的git commit命令
   - 提供安全检查和验证命令
   - 包含可选的git push命令

2. **执行指导** (使用 Bash 工具)
   - 提供快速执行的步骤指导
   - 包含必要的安全检查
   - 给出后续操作建议
   - 提供撤销和回滚方案

# 交付件说明

## 主要交付物清单

### 1. 快速Commit消息 (Quick Commit Message)
**实时输出**: 直接在对话中提供简洁的commit消息

**包含内容**:
- 符合规范的commit标题
- 必要时的简要说明
- 合适的类型和范围标识
- 清晰的变更描述

**输出格式**:
```git
<type>(<scope>): <subject>
```

**示例输出**:
```git
feat(auth): 添加用户登录功能

fix(ui): 修复按钮点击无响应问题

refactor(api): 重构用户管理模块
```

### 2. 快速执行命令 (Quick Execution Commands)
**实时输出**: 提供可直接复制的Git命令集合

**包含内容**:
- 快速添加变更文件的命令
- 标准化的commit命令
- 安全检查命令
- 可选的推送命令

**输出格式**:
```bash
# 检查当前状态
git status

# 查看变更统计
git diff --stat

# 添加所有变更
git add .

# 执行commit
git commit -m "生成的commit消息"

# 推送到远程（可选）
git push

# 验证结果
git log --oneline -1
```

### 3. 变更概览摘要 (Change Overview Summary)
**实时输出**: 简洁的变更分析摘要

**包含内容**:
- 变更文件数量和类型
- 主要变更类型识别
- 重要变更点说明
- 潜在风险提示

**输出格式**:
```markdown
## 📋 变更概览
- **变更文件**: [数量]个
- **主要类型**: [feat/fix/refactor等]
- **影响范围**: [相关模块]
- **建议操作**: [立即提交/需要检查]

## 🔍 关键变更
- **核心修改**: [主要变更描述]
- **新增功能**: [新功能说明]
- **修复内容**: [修复问题说明]
```

### 4. 使用建议和提示 (Usage Tips and Suggestions)
**实时输出**: 针对当前变更的使用建议

**包含内容**:
- commit消息的优化建议
- 可能的后续操作建议
- 团队协作的注意事项
- 最佳实践提醒

**输出格式**:
```markdown
## 💡 使用建议
- **消息优化**: [消息改进建议]
- **后续操作**: [推荐的后级行动]
- **注意事项**: [重要提醒]
- **团队规范**: [团队约定提醒]
```

## 实时commit支持

### 快速分析状态
**实时输出**: 快速分析的进度和发现

**包含内容**:
- 当前分析状态
- 发现的变更模式
- 消息生成进度
- 执行准备状态

**输出格式**:
```markdown
## ⚡ 快速分析
**状态**: [分析中/完成]
**发现**: [主要变更类型]
**进度**: [百分比]%

## 📝 消息生成
**类型**: [选择的commit类型]
**标题**: [生成的标题]
**状态**: [就绪/优化中]
```

# 约束与限制条件

## 快速分析约束

### 分析精度约束
- **深度限制**: 快速分析可能遗漏某些细节
- **上下文**: 无法深入理解复杂的业务逻辑
- **影响范围**: 对大范围变更的评估可能不够全面
- **依赖关系**: 跨模块依赖的分析可能不够深入

### 消息简洁约束
- **信息密度**: 为保证简洁，可能省略某些细节
- **个性化**: 消息风格相对统一，个性化程度有限
- **详细程度**: 复杂变更的详细说明可能不够充分
- **技术深度**: 技术细节的描述可能比较简略
- **禁止消息**: 禁止出现```🤖 Generated with [Claude Code](https://claude.com/claude-code)```和```Co-Authored-By: Claude <noreply@anthropic.com>```

### 使用场景约束
- **变更复杂度**: 适合简单到中等复杂度的变更
- **团队规范**: 可能与特定团队的详细规范存在差异
- **项目特殊性**: 对特殊项目的特定约定支持有限
- **历史一致性**: 与历史commit的一致性可能需要人工确认

## 技术约束条件

### Git操作约束
- **仓库状态**: 需要Git仓库处于正常状态
- **权限要求**: 需要足够的文件系统权限
- **分支状态**: 复杂分支状态可能影响分析准确性
- **远程同步**: 远程仓库状态信息可能不完整

### 性能约束
- **文件数量**: 大量文件变更可能影响分析速度
- **文件大小**: 大文件变更的完整分析可能受限
- **网络依赖**: 某些操作可能需要网络连接
- **系统资源**: 系统资源限制可能影响执行效率

## 使用约束条件

### 执行环境约束
- **Git仓库**: 必须在有效的Git仓库目录中执行
- **工作目录**: 需要在Git工作目录的根目录或子目录
- **命令行工具**: 需要Git命令行工具正常工作
- **文件系统**: 需要足够的文件系统访问权限

### 责任分担约束
- **最终确认**: 用户需要确认commit消息的准确性
- **执行责任**: commit执行的责任和后果由用户承担
- **备份建议**: 重要变更建议用户进行备份
- **团队协调**: 与团队规范和流程的协调由用户负责

### 质量保证约束
- **人工检查**: 建议用户检查生成的commit消息
- **测试验证**: 重要变更建议在测试环境中验证
- **逐步执行**: 建议用户逐步执行命令
- **持续改进**: 基于使用反馈改进命令功能

# 使用场景与最佳实践

## 适用场景

### 快速开发场景
- **功能迭代**: 快速功能开发和迭代
- **Bug修复**: 日常问题修复和调试
- **代码优化**: 小范围代码重构和优化
- **配置更新**: 项目配置的快速更新

### 个人开发场景
- **个人项目**: 个人项目的快速提交
- **学习练习**: 编程学习和练习的提交
- **实验性代码**: 实验和原型开发
- **开源贡献**: 开源项目的简单贡献

### 紧急场景
- **紧急修复**: 生产环境紧急问题修复
- **快速部署**: 需要快速部署的小变更
- **临时补丁**: 临时性解决方案的提交
- **回滚操作**: 紧急回滚和恢复操作

## 不适用场景

### 复杂变更场景
- **大型重构**: 大规模代码架构重构
- **多模块变更**: 跨多个模块的复杂变更
- **数据库迁移**: 数据库结构重大变更
- **API变更**: 公共API的重大修改

### 团队协作场景
- **代码审查**: 需要详细审查的重要变更
- **版本发布**: 正式版本发布的提交
- **分支合并**: 重要分支的合并操作
- **冲突解决**: 复杂合并冲突的解决

### 合规性要求场景
- **安全修复**: 安全漏洞的详细修复
- **合规提交**: 需要详细合规说明的提交
- **审计要求**: 需要满足审计要求的提交
- **法规变更**: 法规相关的代码变更

## 最佳实践指南

### 变更准备优化

#### 原子性原则
- **单一职责**: 每个commit专注于单一变更
- **逻辑完整**: 确保变更的逻辑完整性
- **测试友好**: 变更要易于测试和验证
- **可回滚**: 确保变更可以安全回滚

#### 状态清理
- **临时代码**: 清理调试代码和临时文件
- **格式统一**: 保持代码格式的一致性
- **注释完善**: 完善或移除临时注释
- **测试通过**: 确保相关测试正常通过

### 消息质量优化

#### 内容简洁
- **关键词**: 使用准确的关键词描述变更
- **动词选择**: 使用清晰的动作动词
- **范围明确**: 明确变更的影响范围
- **结果导向**: 关注变更的结果和效果

#### 格式规范
- **类型准确**: 选择最准确的commit类型
- **长度控制**: 保持合理的消息长度
- **语言一致**: 使用统一的语言和术语
- **标点规范**: 正确使用标点符号

### 使用流程优化

#### 快速执行
- **批量处理**: 对于相关变更进行批量提交
- **频率控制**: 保持合理的commit频率
- **时间选择**: 选择合适的提交时机
- **状态同步**: 及时同步到远程仓库

#### 质量平衡
- **速度vs质量**: 在速度和质量之间找到平衡
- **自动化程度**: 合理利用自动化工具
- **人工检查**: 保留必要的人工检查环节
- **持续改进**: 基于反馈持续优化流程

# 命令执行限制说明

**重要提醒**: 此命令专注于快速生成commit消息和简化Git操作，不涉及复杂的代码分析、深度重构或高级Git操作。如需要以下服务，请使用对应的专业工具：

- **深度分析**: 使用 `smart-commit` 命令进行详细的代码分析和commit消息生成
- **代码开发**: 使用 `godot-gen-code` 命令进行功能开发
- **代码审查**: 使用 `code-reviewer-quality` 命令进行代码质量审查
- **问题调试**: 使用 `godot-debug` 命令解决技术问题
- **文档生成**: 使用 `godot-gen-doc` 命令生成技术文档
- **Git高级操作**: 对于复杂的Git操作，建议使用专业的Git工具或咨询Git专家