---
name: software-architect-design
description: 专业软件架构设计与决策支持工具，支持系统架构设计、技术选型和架构优化。该命令专注于架构模式应用、系统设计决策、技术方案评估和架构文档化，能够生成专业的架构设计文档(ADD)、技术架构图和实施指导，为软件架构师和开发团队提供完整的架构设计支持。
argument-hint: [系统/模块] [架构类型] [设计深度]
---

# 命令参数说明

- **系统/模块** (必需): 指定架构设计的目标，可以是：
  - **整体系统**: 生成完整系统的综合架构设计
  - **特定模块**: 如 "微服务架构"、"数据中台"、"消息队列系统"等
  - **核心组件**: 如 "用户认证服务"、"支付网关"、"搜索引擎"等
  - **技术平台**: 如 "云原生平台"、"大数据平台"、"物联网平台"等
  - **集成系统**: 如 "企业集成架构"、"API网关设计"、"数据同步架构"等

- **架构类型** (可选): 指定架构设计的类型和风格
  - **微服务架构**: 分布式微服务架构设计
  - **单体架构**: 传统单体应用架构设计
  - **分层架构**: 多层架构模式和设计
  - **事件驱动架构**: 基于事件的异步架构设计
  - **云原生架构**: 容器化和云原生架构设计
  - **混合架构**: 多种架构模式的组合设计
  - **默认值**: 如未指定，基于系统特点推荐最适合的架构类型

- **设计深度** (可选): 指定架构设计的详细程度
  - **概念设计**: 生成高层次的架构概念和设计原则
  - **逻辑设计**: 生成详细的逻辑架构和组件设计
  - **物理设计**: 生成具体的物理架构和部署设计
  - **详细设计**: 生成包含具体实施指导的完整架构文档
  - **默认值**: 如未指定，默认为逻辑设计

# 执行步骤

**当前架构设计目标**: $ARGUMENTS

## 第一阶段：架构需求分析与评估
### 工具使用：sequential-thinking + memory + tavily-mcp

1. **业务需求分析** (使用 sequential-thinking 工具)
   - 深度分析业务目标和质量属性要求
   - 确定非功能性需求和技术约束条件
   - 分析系统的可扩展性和性能要求
   - 制定架构设计的决策标准和评估指标

2. **技术环境评估** (使用 memory + tavily-mcp 工具)
   - 评估现有技术栈和基础设施能力
   - 研究行业技术趋势和最佳实践
   - 分析技术风险和约束条件
   - 收集相关架构模式和设计案例

3. **架构约束识别** (使用 sequential-thinking 工具)
   - 识别技术和业务约束条件
   - 分析组织和技术文化因素
   - 确定预算和资源限制
   - 制定架构决策的权衡策略

## 第二阶段：架构设计与决策
### 工具使用：software-architect + sequential-thinking

1. **架构模式选择** (使用 software-architect Agent)
   - 设计整体架构模式和风格
   - 创建核心组件和模块划分
   - 设计系统边界和接口定义
   - 制定架构原则和设计规范

2. **技术架构设计** (使用 sequential-thinking 工具)
   - 设计数据架构和存储策略
   - 规划服务架构和通信机制
   - 设计安全架构和防护措施
   - 制定运维架构和监控策略

3. **集成架构设计** (使用 sequential-thinking 工具)
   - 设计系统集成和数据流架构
   - 规划API设计和接口标准
   - 制定第三方集成策略
   - 设计消息队列和事件驱动架构

## 第三阶段：架构文档化与验证
### 工具使用：design-doc-writer + devops-engineer + memory

1. **架构文档生成** (使用 design-doc-writer Agent)
   - 生成完整的架构设计文档(ADD)
   - 创建架构视图和图表说明
   - 编写架构决策记录(ADR)
   - 制作架构实施指导和最佳实践

2. **技术方案验证** (使用 devops-engineer Agent)
   - 验证技术方案的可行性和成本
   - 评估部署复杂度和运维要求
   - 分析安全性和合规性要求
   - 制定技术债务和重构策略

3. **架构评审完善** (使用 memory 工具)
   - 添加架构评估和质量指标
   - 完善架构演进路径和升级策略
   - 创建架构治理和变更管理流程
   - 补充相关的技术参考资料

## 第四阶段：优化与实施支持
### 工具使用：software-architect + sequential-thinking

1. **架构优化分析** (使用 software-architect Agent)
   - 优化架构的性能和可扩展性
   - 改进架构的安全性和可靠性
   - 优化开发效率和维护成本
   - 制定架构演进和扩展策略

2. **实施风险评估** (使用 sequential-thinking 工具)
   - 识别架构实施的技术风险
   - 评估团队技能和学习成本
   - 分析项目时间和资源风险
   - 制定风险缓解和应对策略

3. **成功标准定义** (使用 sequential-thinking 工具)
   - 定义架构成功的度量指标
   - 制定架构质量评估标准
   - 规划架构验证和测试策略
   - 建立持续改进和优化机制

# Agent 与 MCP 工具指定

## 主要执行 Agent

### software-architect (主导 Agent)
- **使用阶段**: 第二阶段架构设计、第四阶段优化分析
- **核心职责**: 软件架构设计、系统方案规划、技术选型决策
- **专业能力**: 软件架构设计、SOLID原则应用、性能优化、系统集成
- **主要工具**:
  - `sequential-thinking`: 架构决策、技术分析、优化策略
  - `memory`: 架构模式库、设计原则、最佳实践查询
  - `tavily-mcp`: 技术趋势研究、架构案例调研

### design-doc-writer (文档生成支持 Agent)
- **使用阶段**: 第三阶段架构文档化、质量保证
- **核心职责**: 架构文档撰写、标准化格式、内容组织
- **专业能力**: 技术文档写作、ADD标准化、架构图表设计
- **主要工具**:
  - `filesystem`: 文档创建、编辑、格式处理
  - `sequential-thinking`: 文档结构设计、内容规划
  - `memory`: 架构模板查询、标准格式应用

### devops-engineer (实施验证支持 Agent)
- **使用阶段**: 第三阶段技术方案验证
- **触发条件**: 需要部署和运维相关的架构验证时
- **核心职责**: 部署架构验证、运维分析、技术可行性评估
- **专业能力**: CI/CD流水线、容器化部署、云原生架构、基础设施即代码
- **主要工具**:
  - `sequential-thinking`: 部署策略分析、运维方案评估
  - `memory`: DevOps最佳实践、部署模式查询

### system-designer (概念设计支持 Agent)
- **使用阶段**: 第一阶段需求分析、概念架构设计
- **核心职责**: 系统概念设计、用户体验设计、系统性能设计
- **专业能力**: 系统设计理论、用户体验架构、性能设计原则
- **主要工具**:
  - `sequential-thinking`: 系统概念分析、设计原则制定
  - `tavily-mcp`: 系统设计趋势、行业最佳实践研究

## MCP 工具使用策略

### 1. sequential-thinking 工具
- **使用时机**: 第一阶段需求分析、第二阶段架构设计、第四阶段优化分析
- **具体用途**:
  - 深度分析业务需求和技术约束
  - 设计合理的架构模式和组件结构
  - 分析技术方案的优缺点和适用性
  - 优化架构的性能和可维护性
- **思考深度**: 根据设计深度要求和系统复杂度调整分析深度

### 2. memory 工具
- **使用时机**: 第一阶段技术评估、第三阶段文档完善、全程知识支持
- **具体用途**:
  - 查询架构设计模式和最佳实践
  - 收集相关的技术标准和规范要求
  - 存储重要的架构决策和设计方案
  - 建立架构主题的知识库和案例库
- **记忆策略**: 为每个架构项目建立独立的知识图谱

### 3. tavily-mcp 工具
- **使用时机**: 第一阶段技术研究、第二阶段架构调研、第三阶段案例分析
- **具体用途**:
  - 搜索最新的软件架构趋势和技术发展
  - 收集同类系统的架构案例和设计经验
  - 查询技术标准和行业规范要求
  - 获取架构工具和框架的最新发展
- **搜索策略**: 使用架构类型+技术栈+行业场景进行搜索

### 4. filesystem 工具
- **使用时机**: 第三阶段文档生成、第四阶段优化分析、全程文件管理
- **具体用途**:
  - 创建和编辑架构设计文档
  - 组织架构图表和技术资料
  - 管理相关的调研文档和参考资料
  - 生成不同格式的架构输出文件
- **操作策略**: 遵循架构文档管理规范和版本控制要求

# 交付件说明

## 主要交付物清单

### 1. 架构设计文档 (Architecture Design Document)
**文件名格式**: `add_[系统名称]_[架构类型]_[设计深度]_[日期].md`

**包含内容**:
- 完整的系统架构设计和决策说明
- 详细的架构视图和组件描述
- 架构决策记录和权衡分析
- 非功能性需求和技术约束说明

**文档结构**:
```markdown
# 架构设计文档：[系统名称]

## 1. 架构概述
### 1.1 系统背景和目标
### 1.2 架构愿景和原则
### 1.3 关键质量属性要求
### 1.4 架构范围和边界

## 2. 架构决策
### 2.1 架构模式选择
### 2.2 技术栈选型
### 2.3 核心设计决策
### 2.4 架构权衡分析

## 3. 架构视图
### 3.1 逻辑架构视图
### 3.2 部署架构视图
### 3.3 数据架构视图
### 3.4 安全架构视图

## 4. 架构组件
### 4.1 核心组件设计
### 4.2 组件交互设计
### 4.3 接口定义和协议
### 4.4 数据流和控制流

## 5. 横切关注点
### 5.1 安全性设计
### 5.2 性能优化设计
### 5.3 可用性和可靠性
### 5.4 可维护性和扩展性

## 6. 实施指导
### 6.1 开发阶段规划
### 6.2 技术实施策略
### 6.3 风险控制措施
### 6.4 质量保证策略
```

### 2. 架构决策记录 (Architecture Decision Records)
**文件名格式**: `adr_[系统名称]_[决策类型]_[日期].md`

**包含内容**:
- 详细的架构决策记录和理由说明
- 决策的影响分析和替代方案
- 决策的实施状态和结果评估
- 相关的架构原则和约束条件

**文档结构**:
```markdown
# 架构决策记录：[系统名称]

## 决策1: [决策标题]
- **状态**: [提议/通过/已弃用]
- **日期**: [决策日期]
- **决策者**: [决策人员]

## 背景
[决策背景和问题描述]

## 决策
[具体的架构决策内容]

## 理由
[选择该决策的理由和依据]

## 后果
[决策带来的影响和变化]

## 替代方案
- **方案A**: [替代方案描述]
- **方案B**: [替代方案描述]
- **方案C**: [替代方案描述]

## 实施
- **实施状态**: [未开始/进行中/已完成]
- **实施结果**: [实施结果评估]
- **经验教训**: [实施过程中的经验总结]
```

### 3. 技术架构图 (Technical Architecture Diagrams)
**文件名格式**: `arch_diagram_[系统名称]_[视图类型]_[日期].md`

**包含内容**:
- 系统逻辑架构图和组件关系
- 部署架构图和基础设施拓扑
- 数据架构图和数据流设计
- 安全架构图和防护机制

**文档结构**:
```markdown
# 技术架构图：[系统名称]

## 1. 逻辑架构图
### 1.1 整体架构概览
```mermaid
graph TB
    [系统组件关系图]
```
### 1.2 核心模块设计
### 1.3 接口和数据流
### 1.4 关键技术组件

## 2. 部署架构图
### 2.1 基础设施拓扑
```mermaid
graph LR
    [部署环境关系图]
```
### 2.2 网络架构设计
### 2.3 容器化和编排
### 2.4 环境配置管理

## 3. 数据架构图
### 3.1 数据存储设计
```mermaid
graph TD
    [数据流向和存储关系图]
```
### 3.2 数据同步策略
### 3.3 数据备份和恢复
### 3.4 数据治理架构

## 4. 安全架构图
### 4.1 安全防护体系
```mermaid
graph TB
    [安全组件和防护机制图]
```
### 4.2 身份认证和授权
### 4.3 数据加密和传输
### 4.4 安全监控和审计
```

### 4. 架构实施指导 (Architecture Implementation Guide)
**文件名格式**: `arch_impl_guide_[系统名称]_[设计深度]_[日期].md`

**包含内容**:
- 详细的架构实施步骤和指导
- 开发技术规范和编码标准
- 测试策略和质量保证流程
- 部署和运维最佳实践

**文档结构**:
```markdown
# 架构实施指导：[系统名称]

## 1. 开发指导
### 1.1 开发环境搭建
### 1.2 编码规范和标准
### 1.3 组件开发指南
### 1.4 接口开发规范

## 2. 集成指导
### 2.1 模块集成策略
### 2.2 API设计和开发
### 2.3 数据集成方案
### 2.4 第三方集成指导

## 3. 测试指导
### 3.1 架构测试策略
### 3.2 性能测试设计
### 3.3 安全测试方案
### 3.4 集成测试流程

## 4. 部署指导
### 4.1 部署环境准备
### 4.2 部署流程自动化
### 4.3 监控和日志配置
### 4.4 运维管理指导
```

### 5. 概念架构文档 (Conceptual Architecture)
**文件名格式**: `concept_arch_[系统名称]_概要_[日期].md`

**包含内容**:
- 高层次的架构概念和设计理念
- 核心架构原则和设计哲学
- 主要技术选型和决策依据
- 实施要点和成功因素

**文档结构**:
```markdown
# 概念架构文档：[系统名称]

## 1. 架构愿景
### 1.1 架构理念
### 1.2 设计哲学
### 1.3 核心价值
### 1.4 创新要点

## 2. 核心概念
### 2.1 架构原则
### 2.2 设计模式
### 2.3 关键技术
### 2.4 业务映射

## 3. 技术路线
### 3.1 技术选型
### 3.2 架构演进
### 3.3 风险控制
### 3.4 成功要素

## 4. 实施要点
### 4.1 关键里程碑
### 4.2 资源需求
### 4.3 组织准备
### 4.4 持续改进
```

## 实时架构设计支持

### 设计进度跟踪
**实时输出**: 在对话中提供实时的架构设计进度和关键决策

**包含内容**:
- 当前架构设计阶段和完成进度
- 重要架构决策的制定状态
- 遇到的技术挑战和解决方案
- 下一步设计内容和优化建议

**输出格式**:
```markdown
## 🏗️ 架构设计进度报告
**当前阶段**: [具体设计阶段]
**完成度**: [百分比]%
**架构类型**: [设计的架构类型]

## 📊 设计发现状态
- **已完成设计**: [已完成的架构模块]
- **进行中内容**: [正在设计的架构组件]
- **待开始部分**: [待设计的架构模块]

## 🎯 关键架构决策
- **架构模式**: [选择的架构模式和理由]
- **技术选型**: [主要技术栈和选型依据]
- **设计原则**: [采用的架构设计原则]
- **创新点**: [架构中的创新设计点]

## 📋 下一步计划
1. [下一步要设计的架构模块]
2. [需要重点分析的技术点]
3. [需要验证的架构假设]
4. [需要完善的架构文档]
```

# 约束与限制条件

- 只需要输出设计文档，禁止输出代码
- 设计文档中禁止输出详细代码

## 设计内容约束

### 专业性约束
- **架构正确性**: 确保架构设计的技术正确性和可行性
- **标准合规性**: 设计方法必须符合软件工程和架构设计标准
- **实践适用性**: 所有建议的架构方案必须在现有条件下可实现
- **行业适配性**: 考虑行业特点和架构模式的适用性

### 完整性约束
- **架构覆盖**: 确保覆盖系统的所有重要架构维度
- **视图完整**: 提供完整的架构视图和多层次表示
- **决策完整**: 记录所有重要的架构决策和理由
- **文档一致**: 架构文档保持一致性和可追溯性

### 创新性约束
- **技术前瞻**: 考虑技术发展趋势和未来演进需求
- **模式创新**: 鼓励适合的创新架构模式应用
- **差异化设计**: 避免简单复制现有架构方案
- **适应性设计**: 设计应能适应业务和技术变化

## 项目约束条件

### 技术约束
- **技术栈限制**: 考虑现有技术栈和能力限制
- **基础设施约束**: 考虑基础设施和部署环境约束
- **集成复杂度**: 控制系统集成的复杂度和风险
- **维护成本**: 评估长期维护和扩展的技术成本

### 组织约束
- **团队技能**: 考虑开发团队的架构理解和技能水平
- **组织文化**: 考虑组织的技术文化和决策机制
- **沟通成本**: 评估架构沟通和知识传递的成本
- **变更阻力**: 考虑架构变更的组织接受度

### 商业约束
- **预算限制**: 考虑架构实施和运维的预算约束
- **时间压力**: 平衡架构质量和项目时间要求
- **业务适配**: 架构设计必须适配业务目标和战略
- **风险承受**: 评估组织对技术风险的承受能力

## 使用约束条件

### 需求明确性约束
- **目标清晰**: 系统目标和质量属性必须清晰明确
- **约束明确**: 技术和业务约束条件需要明确界定
- **范围界定**: 架构设计的范围和边界需要明确定义
- **标准明确**: 技术标准和质量标准必须明确

### 应用范围约束
- **系统适配**: 设计的架构需要适配具体系统需求
- **技术适配**: 考虑技术环境和基础设施特点
- **组织适配**: 适配组织的开发流程和管理模式
- **演进适配**: 考虑系统的长期演进和发展需求

### 验证责任约束
- **原型验证**: 建议通过架构原型验证关键设计决策
- **团队确认**: 重要架构决策需要架构委员会和团队确认
- **持续评估**: 定期评估架构实施效果和适用性
- **迭代优化**: 基于实施反馈持续优化架构设计

## 伦理约束条件

### 技术责任约束
- **架构质量**: 对架构设计的技术质量承担专业责任
- **可持续性**: 考虑架构的长期可持续发展
- **技术债务**: 控制技术债务并制定偿还策略
- **知识传承**: 促进架构知识的传承和分享

### 社会责任约束
- **安全责任**: 确保架构设计不会带来安全风险
- **隐私保护**: 在架构设计中保护用户隐私
- **可访问性**: 考虑系统的可访问性和包容性设计
- **环境影响**: 考虑技术选择的环境影响

# 使用场景与最佳实践

## 适用场景

### 新系统设计
- **产品架构**: 为新产品设计完整的技术架构
- **平台架构**: 设计技术平台和基础架构
- **企业架构**: 设计企业级系统架构和技术战略
- **云原生架构**: 设计云原生和容器化架构

### 系统重构
- **架构迁移**: 从传统架构向现代架构迁移
- **微服务化**: 将单体应用重构为微服务架构
- **性能优化**: 通过架构优化提升系统性能
- **技术升级**: 升级核心技术栈和基础设施

### 集成架构
- **企业集成**: 设计企业系统集成架构
- **API网关**: 设计API管理和网关架构
- **数据中台**: 设计数据中台和数据湖架构
- **混合云**: 设计混合云和多云架构

### 架构评估
- **架构评审**: 评估现有架构的合理性
- **技术选型**: 评估和选择适合的技术方案
- **风险评估**: 识别和评估架构风险
- **性能调优**: 通过架构优化提升性能

## 不适用场景

### 具体实现
- **代码实现**: 不是直接的代码编写工具
- **数据库设计**: 不进行具体的数据库schema设计
- **界面设计**: 不涉及具体的用户界面和交互设计
- **算法设计**: 不涉及具体的算法和数据结构设计

### 项目管理
- **项目规划**: 不替代专业的项目管理和规划工具
- **团队管理**: 不涉及团队组织和人员管理
- **进度控制**: 不进行项目进度的跟踪和控制
- **质量管理**: 不替代完整的质量管理体系

### 运营管理
- **系统运维**: 不进行具体的系统运维操作
- **监控配置**: 不涉及具体的监控配置和管理
- **安全管理**: 不替代专业的安全管理体系
- **容量规划**: 不进行详细的容量规划和资源管理

## 最佳实践指南

### 架构设计优化

#### 设计原则明确化
- **简洁原则**: 保持架构的简洁性和清晰性
- **模块化**: 采用模块化设计提高系统内聚性
- **松耦合**: 设计松耦合的组件和接口
- **可扩展**: 设计具有良好扩展性的架构

#### 技术选型策略
- **技术适配**: 选择适配业务需求的技术栈
- **成熟稳定**: 优先选择成熟稳定的技术方案
- **社区支持**: 考虑技术的社区支持和生态
- **学习成本**: 评估团队的学习成本和技术风险

### 架构文档优化

#### 文档结构化
- **多层次文档**: 提供概念、逻辑、物理多层次文档
- **视图完整**: 包含完整的架构视图和图表
- **决策记录**: 详细记录架构决策和理由
- **实施指导**: 提供详细的实施和运维指导

#### 知识管理
- **架构知识库**: 建立架构知识库和最佳实践库
- **案例积累**: 积累和分享架构设计案例
- **经验传承**: 促进架构经验的传承和分享
- **持续学习**: 持续学习新的架构模式和技术

### 团队协作优化

#### 架构治理
- **架构委员会**: 建立架构委员会和决策机制
- **标准制定**: 制定架构标准和设计规范
- **评审流程**: 建立架构评审和审批流程
- **变更管理**: 建立架构变更管理和控制机制

#### 技术交流
- **架构分享**: 定期进行架构设计分享和讨论
- **技术培训**: 提供架构设计和技术培训
- **外部交流**: 参与外部技术交流和专业社区
- **知识沉淀**: 沉淀和传承架构设计经验

# 命令执行限制说明

**重要提醒**: 此命令专注于专业的架构设计和决策支持，不涉及具体的代码实现、项目管理或系统运维。如需要以下服务，请使用对应的专业命令：

- **需求分析**: 使用 `software-requirements-analysis` 命令进行需求分析
- **代码实现**: 使用 `software-developer` 命令进行功能开发
- **代码审查**: 使用 `code-reviewer` 命令进行代码质量审查
- **技术选型**: 使用 `tech-selection-analysis` 命令进行详细技术选型
- **DevOps支持**: 使用 `devops-engineer` 命令进行部署和运维
- **系统设计**: 使用 `system-designer` 命令进行创意系统设计