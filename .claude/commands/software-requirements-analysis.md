---
name: software-requirements-analysis
description: 智能软件需求分析与文档生成工具，支持功能需求、非功能需求和用户故事的全面分析。该命令专注于需求收集、分析建模、需求验证和文档化，能够生成专业的软件需求规格说明书(SRS)、用户故事地图和需求分析报告，为软件开发团队提供完整的需求工程支持。
argument-hint: [项目/功能] [需求类型] [分析深度]
---

# 命令参数说明

- **项目/功能** (必需): 指定需求分析的目标，可以是：
  - **整体项目**: 生成完整项目的综合需求分析
  - **特定模块**: 如 "用户认证模块"、"订单管理系统"、"数据分析平台"等
  - **核心功能**: 如 "用户注册登录"、"商品搜索"、"支付流程"、"报表生成"等
  - **系统升级**: 如 "系统迁移需求"、"性能优化需求"、"安全增强需求"等
  - **集成需求**: 如 "第三方集成"、"API接口设计"、"数据同步需求"等

- **需求类型** (可选): 指定需求分析的侧重点
  - **功能需求**: 系统应该具备的具体功能和特性
  - **非功能需求**: 性能、安全、可用性等质量属性要求
  - **业务需求**: 高层次的业务目标和用户价值
  - **用户需求**: 用户体验和交互设计要求
  - **技术需求**: 技术架构、集成和约束要求
  - **默认值**: 如未指定，默认为全面需求分析

- **分析深度** (可选): 指定需求分析的详细程度
  - **概要分析**: 生成高层次的需求概述和关键要点，适合项目立项和概念验证
  - **详细分析**: 生成完整详细的需求规格书，包含具体的验收标准和测试用例
  - **深度分析**: 生成包含用户故事、用例图和数据模型的深度需求文档
  - **默认值**: 如未指定，默认为详细分析

# 执行步骤

**当前分析目标**: $ARGUMENTS

## 第一阶段：需求收集与范围界定
### 工具使用：sequential-thinking + memory + tavily-mcp

1. **项目背景分析** (使用 sequential-thinking 工具)
   - 深度分析项目 **$1** 的业务背景和发展历程
   - 确定项目的商业目标和价值主张
   - 分析项目干系人和利益相关者
   - 基于 **$2** 需求类型制定需求收集的范围和边界

2. **用户群体识别** (使用 memory + tavily-mcp 工具)
   - 针对 **$1** 项目识别和分析目标用户群体特征
   - 研究用户行为模式和使用场景
   - 收集行业用户画像和最佳实践
   - 基于 **$2** 需求重点分析用户需求和痛点问题

3. **业务流程梳理** (使用 sequential-thinking 工具)
   - 分析 **$1** 项目的当前业务流程和存在问题
   - 设计优化后的业务流程方案
   - 确定系统的业务价值和改进点
   - 根据 **$3** 分析深度制定业务成功的评估标准

## 第二阶段：需求建模与分析
### 工具使用：system-designer + sequential-thinking

1. **功能需求建模** (使用 system-designer Agent)
   - 为 **$1** 项目设计系统功能架构和模块划分
   - 基于 **$2** 需求类型创建功能需求清单和优先级排序
   - 设计用户故事地图和功能路线图
   - 根据分析深度 **$3** 制定功能实现的验收标准

2. **非功能需求分析** (使用 sequential-thinking 工具)
   - 针对 **$1** 项目分析性能、可用性、安全性等质量要求
   - 确定系统的可扩展性和维护性需求
   - 制定技术约束和合规性要求
   - 根据 **$3** 分析深度设计质量属性的度量指标

3. **数据模型设计** (使用 sequential-thinking 工具)
   - 分析 **$1** 项目的业务数据实体和关系
   - 根据分析深度 **$3** 设计概念数据模型和逻辑数据模型
   - 确定数据生命周期和治理要求
   - 制定数据安全和隐私保护措施

## 第三阶段：需求文档化与验证
### 工具使用：design-doc-writer + software-architect + memory

1. **需求规格书生成** (使用 design-doc-writer Agent)
   - 为 **$1** 项目生成完整的软件需求规格说明书
   - 基于 **$2** 需求类型创建详细的功能需求描述和用例
   - 编写非功能需求和技术约束说明
   - 根据分析深度 **$3** 制作需求跟踪矩阵和变更管理流程

2. **用户故事撰写** (使用 software-architect Agent)
   - 为 **$1** 项目编写详细的用户故事和验收标准
   - 基于 **$3** 分析深度创建用户故事地图和发布计划
   - 设计用户角色和权限模型
   - 制作交互设计和界面原型指导

3. **需求验证完善** (使用 memory 工具)
   - 为 **$1** 项目添加需求的可测试性和可验证性
   - 完善需求的完整性和一致性检查
   - 创建需求评审和确认流程
   - 基于 **$2** 需求类型补充相关的参考资料和行业案例

## 第四阶段：质量保证与优化
### 工具使用：senior-code-reviewer + sequential-thinking

1. **需求质量审查** (使用 senior-code-reviewer Agent)
   - 检查 **$1** 项目需求的完整性、一致性和可理解性
   - 验证需求的可实现性和可测试性
   - 优化需求的表达方式和文档结构
   - 确保符合需求工程的行业标准

2. **可行性分析优化** (使用 sequential-thinking 工具)
   - 优化 **$1** 项目技术方案的可行性和成本效益
   - 改进项目范围和资源需求的合理性
   - 增强风险评估和应对策略的有效性
   - 考虑不同实施方案的优缺点分析

3. **可追溯性验证** (使用 sequential-thinking 工具)
   - 验证 **$1** 项目需求与业务目标的一致性
   - 检查需求之间的依赖关系和影响
   - 基于 **$3** 分析深度确认需求的可测试性和验收标准
   - 评估需求变更的影响和管控措施

# Agent 与 MCP 工具指定

## 主要执行 Agent

### system-designer (主导 Agent)
- **使用阶段**: 第二阶段需求建模、整体架构设计
- **核心职责**: 系统需求分析、架构设计、系统需求文档(SRD)生成
- **专业能力**: 系统设计概念、用户体验设计、系统性能设计、需求建模
- **主要工具**:
  - `sequential-thinking`: 需求分析、架构决策、系统设计
  - `memory`: 设计模式查询、最佳实践应用、知识整合
  - `tavily-mcp`: 行业趋势研究、竞品分析、技术方案调研

### design-doc-writer (文档生成支持 Agent)
- **使用阶段**: 第三阶段需求文档化、第四阶段质量保证
- **核心职责**: 需求文档撰写、格式标准化、内容组织
- **专业能力**: 技术文档写作、SRS标准化、内容结构化、知识组织
- **主要工具**:
  - `filesystem`: 文档创建、编辑、格式处理
  - `sequential-thinking`: 文档结构设计、内容规划、质量优化
  - `memory`: 需求模板查询、标准格式应用、行业规范

### software-architect (技术架构支持 Agent)
- **使用阶段**: 第三阶段用户故事撰写、技术需求分析
- **触发条件**: 需要技术架构和系统设计指导时
- **核心职责**: 技术架构设计、系统方案规划、技术可行性分析
- **专业能力**: 软件架构设计、SOLID原则应用、性能优化、系统集成
- **主要工具**:
  - `sequential-thinking`: 技术方案分析、架构决策、优化策略
  - `memory`: 架构模式库、技术标准、最佳实践查询

### senior-code-reviewer (质量保证支持 Agent)
- **使用阶段**: 第四阶段质量审查、需求验证
- **核心职责**: 需求质量审查、可行性验证、标准化检查
- **专业能力**: 需求工程、质量保证、风险管理、行业标准
- **主要工具**:
  - `sequential-thinking`: 质量评估、风险分析、改进建议
  - `memory`: 质量标准、审查流程、行业规范查询

## MCP 工具使用策略

### 1. sequential-thinking 工具
- **使用时机**: 第一阶段背景分析、第二阶段需求建模、第四阶段质量优化
- **具体用途**:
  - 深度分析项目背景和业务需求
  - 设计合理的需求模型和分析框架
  - 分析技术方案的可行性和优缺点
  - 优化需求文档的表达方式和可读性
- **思考深度**: 根据分析深度要求和项目复杂度调整分析深度

### 2. memory 工具
- **使用时机**: 第一阶段用户研究、第三阶段文档完善、全程知识支持
- **具体用途**:
  - 查询需求工程的标准模板和最佳实践
  - 收集相关的行业案例和成功经验
  - 存储重要的需求决策和架构方案
  - 建立需求主题的知识库和分类体系
- **记忆策略**: 为每个项目需求建立独立的知识图谱

### 3. tavily-mcp 工具
- **使用时机**: 第一阶段资料收集、第二阶段行业研究、第三阶段案例分析
- **具体用途**:
  - 搜索最新的软件需求工程趋势和方法
  - 收集同类系统的需求案例和设计经验
  - 查询行业标准和技术规范要求
  - 获取需求分析工具和框架的最新发展
- **搜索策略**: 使用项目关键词+需求类型+行业最佳实践进行搜索

### 4. filesystem 工具
- **使用时机**: 第三阶段文档生成、第四阶段质量审查、全程文件管理
- **具体用途**:
  - 创建和编辑需求规格文档
  - 组织需求的分类结构和格式
  - 管理相关的调研资料和参考文档
  - 生成不同格式的需求输出文件
- **操作策略**: 遵循需求文档管理规范和版本控制要求

# 交付件说明

## 主要交付物清单

### 1. 软件需求规格说明书 (Software Requirements Specification)
**文件名格式**: `srs_[项目名称]_[需求类型]_[分析深度]_[日期].md`

**包含内容**:
- 完整的功能需求和非功能需求说明
- 详细的业务场景和用户用例描述
- 系统约束和技术要求说明
- 验收标准和测试指导原则

**文档结构**:
```markdown
# 软件需求规格说明书：[项目名称]

## 1. 引言
### 1.1 项目背景和目标
### 1.2 文档范围和目的
### 1.3 定义和术语
### 1.4 参考资料和标准

## 2. 总体描述
### 2.1 产品愿景和范围
### 2.2 用户特征和需求
### 2.3 业务流程和场景
### 2.4 系统约束和限制

## 3. 功能需求
### 3.1 功能需求概述
### 3.2 核心功能模块
### 3.3 用户角色和权限
### 3.4 业务规则和约束

## 4. 非功能需求
### 4.1 性能需求
### 4.2 安全需求
### 4.3 可用性需求
### 4.4 可维护性需求

## 5. 接口需求
### 5.1 用户界面需求
### 5.2 硬件接口需求
### 5.3 软件接口需求
### 5.4 通信接口需求

## 6. 验收标准
### 6.1 功能验收标准
### 6.2 性能验收标准
### 6.3 安全验收标准
### 6.4 用户体验验收标准
```

### 2. 用户故事地图 (User Story Map)
**文件名格式**: `user_story_map_[项目名称]_[分析深度]_[日期].md`

**包含内容**:
- 详细的用户故事和验收标准
- 用户角色画像和使用场景
- 功能优先级和发布计划
- 用户交互流程和界面要求

**文档结构**:
```markdown
# 用户故事地图：[项目名称]

## 1. 用户角色定义
### 1.1 主要用户群体
### 1.2 用户特征分析
### 1.3 用户目标和需求
### 1.4 用户使用场景

## 2. 用户故事框架
### 2.1 核心用户旅程
### 2.2 主要功能活动
### 2.3 用户任务分解
### 2.4 价值和收益分析

## 3. 详细用户故事
### 3.1 [用户角色]用户故事集
#### 3.1.1 故事1：[故事标题]
- **用户故事**: 作为[用户角色]，我希望[功能描述]，以便[价值获得]
- **验收标准**:
  - 给定[前提条件]
  - 当[操作行为]
  - 那么[期望结果]
- **业务价值**: [价值说明]
- **优先级**: [高/中/低]

## 4. 发布计划
### 4.1 MVP功能集
### 4.2 迭代发布规划
### 4.3 功能依赖关系
### 4.4 风险评估和应对
```

### 3. 需求分析报告 (Requirements Analysis Report)
**文件名格式**: `req_analysis_[项目名称]_[分析深度]_[日期].md`

**包含内容**:
- 详细的需求分析和建模结果
- 需求优先级和依赖关系分析
- 技术可行性和成本效益评估
- 项目实施建议和风险管控

**文档结构**:
```markdown
# 需求分析报告：[项目名称]

## 1. 执行摘要
### 1.1 项目概述和目标
### 1.2 关键发现和建议
### 1.3 主要风险和挑战
### 1.4 成功要素和建议

## 2. 需求分析结果
### 2.1 功能需求分析
### 2.2 非功能需求分析
### 2.3 用户需求分析
### 2.4 技术需求分析

## 3. 建模结果
### 3.1 业务流程模型
### 3.2 用例模型
### 3.3 数据模型
### 3.4 系统架构建议

## 4. 可行性分析
### 4.1 技术可行性
### 4.2 经济可行性
### 4.3 操作可行性
### 4.4 时间可行性

## 5. 实施建议
### 5.1 项目实施策略
### 5.2 资源需求评估
### 5.3 时间规划建议
### 5.4 风险管控措施
```

### 4. 概要需求文档 (Requirements Summary)
**文件名格式**: `req_summary_[项目名称]_概要_[日期].md`

**包含内容**:
- 高层次的需求概述和关键特性
- 核心功能和价值主张总结
- 主要约束和依赖关系
- 实施要点和成功因素

**文档结构**:
```markdown
# 概要需求文档：[项目名称]

## 1. 项目概述
### 1.1 项目愿景
### 1.2 核心价值
### 1.3 关键特性
### 1.4 目标用户

## 2. 核心需求
### 2.1 主要功能需求
### 2.2 关键非功能需求
### 2.3 用户核心需求
### 2.4 技术约束要求

## 3. 实施要点
### 3.1 关键里程碑
### 3.2 资源需求
### 3.3 风险评估
### 3.4 成功指标

## 4. 下一步行动
### 4.1 立即行动项
### 4.2 短期目标
### 4.3 长期规划
### 4.4 支持需求
```

## 实时需求分析支持

### 分析进度跟踪
**实时输出**: 在对话中提供实时的需求分析进度和关键发现

**包含内容**:
- 当前需求分析阶段和完成进度
- 重要需求和用户故事的识别状态
- 遇到的关键决策和分析结果
- 下一步分析内容和建议

**输出格式**:
```markdown
## 🔍 需求分析进度报告
**当前阶段**: [具体分析阶段]
**完成度**: [百分比]%
**分析类型**: [需求分析类型]

## 📊 分析发现状态
- **已完成分析**: [已完成的分析模块]
- **进行中内容**: [正在分析的需求领域]
- **待开始部分**: [待分析的需求和模块]

## 🎯 关键需求发现
- **核心功能需求**: [识别的关键功能需求]
- **用户痛点分析**: [发现的主要用户痛点]
- **技术约束条件**: [重要的技术和业务约束]
- **业务价值点**: [识别的主要业务价值]

## 📋 下一步计划
1. [下一步要分析的需求模块]
2. [需要重点关注的需求点]
3. [需要验证的假设和约束]
4. [需要补充的用户调研和数据分析]
```

# 约束与限制条件

## 分析内容约束

### 专业性约束
- **需求准确性**: 确保需求分析结果的准确性和实用性
- **方法合规性**: 分析方法必须符合软件工程和需求工程标准
- **实践可行性**: 所有建议的方案必须在现有条件下可实现
- **行业适配性**: 考虑行业特点和最佳实践的适用性

### 完整性约束
- **需求覆盖**: 确保覆盖项目的所有重要需求维度
- **逻辑一致**: 分析结果保持逻辑一致性和可追溯性
- **细节平衡**: 根据分析深度要求平衡内容的深度和广度
- **可验证性**: 提供的需求应具有可测试和可验证性

### 客观性约束
- **数据驱动**: 基于数据和事实进行需求分析
- **用户中心**: 以用户价值和用户体验为中心
- **业务导向**: 紧密围绕业务目标和价值创造
- **技术可行**: 考虑技术实现的可行性和成本效益

## 项目约束条件

### 范围约束
- **项目适配**: 分析结果需要适配具体项目需求
- **团队适配**: 考虑开发团队的技能和经验水平
- **环境适配**: 考虑开发环境和部署环境的特点
- **标准适配**: 符合团队或公司的需求和开发标准

### 时间约束
- **分析周期**: 控制需求分析的时间和资源投入
- **时效性**: 考虑需求的时效性和变化可能性
- **优先级**: 建立需求的优先级和实施顺序
- **迭代优化**: 支持需求的迭代细化和优化

### 资源约束
- **人力成本**: 考虑需求分析的人力投入和成本
- **技术资源**: 评估可用技术资源和工具支持
- **预算限制**: 考虑项目预算对需求的约束
- **时间压力**: 平衡分析质量和项目时间要求

## 使用约束条件

### 需求明确性约束
- **项目清晰**: 项目背景和目标必须清晰明确
- **范围界定**: 分析范围和边界需要明确定义
- **用户明确**: 目标用户和使用场景必须明确
- **约束清晰**: 技术和业务约束条件必须清晰

### 应用范围约束
- **业务适配**: 生成的需求需要适配具体业务场景
- **技术适配**: 考虑技术架构和实现约束
- **组织适配**: 适配组织的开发流程和管理模式
- **市场适配**: 考虑市场需求和竞争环境

### 验证责任约束
- **需求验证**: 用户需要验证需求的正确性和完整性
- **用户测试**: 建议通过用户测试验证关键需求
- **团队确认**: 重要需求决策需要团队确认和认可
- **持续更新**: 项目变更时需要及时更新需求分析

## 伦理约束条件

### 隐私保护约束
- **用户隐私**: 保护用户数据和个人隐私信息
- **数据安全**: 确保需求分析中的数据安全
- **合规要求**: 符合相关法律法规和合规要求
- **透明度**: 对需求分析过程和结果保持透明

### 专业责任约束
- **质量承诺**: 对需求分析质量承担专业责任
- **能力边界**: 透明地展示能力范围和限制
- **持续改进**: 基于反馈持续改进分析方法
- **建议客观**: 提供客观中立的需求分析建议

# 使用场景与最佳实践

## 适用场景

### 项目启动阶段
- **项目立项**: 为新项目进行需求分析和可行性研究
- **投资决策**: 制作用于投资决策的需求分析报告
- **团队组建**: 为新项目团队提供需求指导和分析框架
- **范围界定**: 明确项目范围和边界条件

### 需求工程过程
- **需求收集**: 系统化地收集和整理项目需求
- **需求分析**: 深度分析需求的合理性和完整性
- **需求建模**: 建立需求的模型和结构化表示
- **需求验证**: 验证需求的正确性和可实现性

### 产品管理
- **产品规划**: 为产品功能规划提供需求分析支持
- **用户研究**: 深入了解用户需求和使用场景
- **竞品分析**: 分析竞品功能和市场定位
- **产品迭代**: 为产品功能迭代提供需求指导

### 系统升级
- **需求变更**: 分析系统升级的需求变更和影响
- **功能扩展**: 为现有系统功能扩展进行需求分析
- **技术迁移**: 分析技术迁移的需求和约束条件
- **性能优化**: 分析性能优化的需求和实现方案

## 不适用场景

### 具体实现
- **代码编写**: 不是直接的代码实现工具
- **数据库设计**: 不涉及具体的数据库设计实现
- **界面设计**: 不进行具体的用户界面设计
- **测试执行**: 不执行具体的测试和验证工作

### 运营管理
- **项目管理**: 不替代专业的项目管理工具
- **团队管理**: 不涉及团队组织和人员管理
- **预算制定**: 不进行详细的预算制定和成本控制
- **进度管理**: 不替代项目进度跟踪和监控

### 商业决策
- **市场分析**: 不进行深入的市场分析和商业评估
- **财务分析**: 不作为财务分析和投资决策工具
- **法律咨询**: 不提供法律咨询和合规审查
- **风险评估**: 不进行全面的商业风险评估

## 最佳实践指南

### 需求定义优化

#### 分析范围明确化
- **目标清晰**: 明确定义需求分析的目标和成功标准
- **边界设定**: 清晰界定分析范围和边界条件
- **用户识别**: 准确识别目标用户群体和关键干系人
- **约束确认**: 明确技术和业务约束条件

#### 分析深度选择
- **概要分析**: 适用于项目立项、投资决策、概念验证
- **详细分析**: 适用于详细设计、开发指导、验收标准制定
- **深度分析**: 适用于复杂系统、关键模块、创新功能
- **迭代分析**: 从概要开始，逐步深入和细化

### 分析过程优化

#### 数据收集
- **多维收集**: 从用户、业务、技术多维度收集需求
- **方法多样**: 结合访谈、问卷、观察等多种收集方法
- **验证交叉**: 通过不同渠道验证需求的真实性和重要性
- **动态更新**: 建立需求的动态收集和更新机制

#### 分析方法
- **结构化分析**: 采用结构化的需求分析方法和工具
- **用户中心**: 始终以用户价值和体验为中心进行分析
- **数据驱动**: 基于数据和事实进行客观分析
- **创新思维**: 鼓励创新的需求分析和解决方案

### 团队协作优化

#### 跨职能协作
- **多方参与**: 邀请业务、技术、设计等多方参与分析
- **沟通机制**: 建立有效的需求沟通和反馈机制
- **共识建立**: 通过分析建立团队的需求共识
- **知识共享**: 促进需求分析和最佳实践的共享

#### 持续改进
- **反馈收集**: 收集对需求分析过程和结果的反馈
- **方法优化**: 基于反馈持续优化分析方法
- **知识积累**: 建立需求分析的知识库和案例库
- **标准提升**: 不断提升需求分析的专业标准和质量

# 命令执行限制说明

**重要提醒**: 此命令专注于专业的需求分析和文档生成，不涉及具体的代码实现、界面设计或项目管理。如需要以下服务，请使用对应的专业命令：

- **系统架构设计**: 使用 `software-architect` 命令进行深度架构设计
- **代码实现指导**: 使用 `software-developer` 命令进行功能开发
- **代码质量审查**: 使用 `code-reviewer` 命令进行代码质量审查
- **技术选型分析**: 使用 `tech-selection-analysis` 命令进行技术选型
- **DevOps支持**: 使用 `devops-engineer` 命令进行部署和运维
- **系统设计**: 使用 `system-designer` 命令进行创意系统设计