---
name: code-advisor
description: 综合代码审查和质量分析技能，能够检视各种编程语言的代码，识别潜在问题，提供具体的修改建议，并集成context7进行API和SDK文档查询。使用此技能当需要：代码检视、代码审查、代码质量分析、识别bug和安全漏洞、性能优化建议、代码重构指导、API/SDK使用规范检查时。
---

# Code Advisor - 代码审查与质量分析技能

## 快速开始

### 基本代码审查流程

1. **识别代码类型和范围**
   ```bash
   检查文件扩展名和项目结构确定编程语言
   分析代码复杂度和依赖关系
   ```

2. **执行代码质量检查**
   - 参考 [CHECKLIST.md](references/CHECKLIST.md) 进行系统性检查
   - 使用对应的语言特定检查指南

3. **生成改进建议**
   - 参考 [BEST_PRACTICES.md](references/BEST_PRACTICES.md) 
   - 使用 [报告模板](assets/report-template.md) 生成结构化输出

## 核心功能

### 代码问题识别

- **安全性问题**: SQL注入、XSS、权限绕过等
- **性能问题**: 算法复杂度、资源泄漏、不必要的计算
- **可维护性问题**: 代码重复、命名不规范、缺乏文档
- **可靠性问题**: 错误处理不当、边界条件处理
- **兼容性问题**: API版本、平台依赖

### 集成文档查询

对于不确定的API或SDK使用：

```python
# 使用context7查询API文档
context7_query = f"查询 {api_name} 的最新文档和使用示例"
# 在需要时自动调用context7获取权威信息
```

## 编程语言支持

### 主要支持语言
- **JavaScript/TypeScript**: 前端和Node.js代码审查
- **Python**: 后端API、数据处理、机器学习代码
- **Java**: 企业级应用、Android开发
- **C/C++**: 系统编程、嵌入式开发
- **Go**: 微服务、云原生应用
- **Rust**: 系统编程、安全关键应用

### 语言特定检查

每种语言都有对应的检查指南，详见：
- [JavaScript检查指南](references/javascript-guide.md)
- [Python检查指南](references/python-guide.md)  
- [Java检查指南](references/java-guide.md)
- [C++检查指南](references/cpp-guide.md)

## 审查输出格式

### 问题优先级分类

🔴 **高优先级** - 安全漏洞、崩溃风险、性能严重问题
🟡 **中优先级** - 代码质量问题、维护性问题、轻微性能问题  
🟢 **低优先级** - 代码风格、命名建议、优化机会

### 建议输出模板

使用 [标准报告模板](assets/report-template.md) 生成包含以下内容的分析报告：

1. **执行摘要** - 整体代码质量评估
2. **问题清单** - 按优先级排序的具体问题
3. **修改建议** - 每个问题的具体解决方案
4. **最佳实践建议** - 代码改进的通用建议
5. **相关文档** - 有用的API文档和学习资源

## 工作流程

### 完整审查流程

1. **预处理阶段**
   ```bash
   分析项目结构和依赖
   识别代码语言和框架
   确定审查重点范围
   ```

2. **分析阶段**
   ```bash
   执行静态代码分析
   检查常见编程错误
   验证API使用正确性
   评估性能和安全风险
   ```

3. **报告阶段**
   ```bash
   生成结构化问题报告
   提供具体的修改建议
   推荐相关的学习资源
   创建改进行动计划
   ```

### 特殊场景处理

- **大项目**: 使用分层审查策略，先审查核心模块
- **遗留代码**: 重点关注安全性和稳定性问题
- **新框架**: 使用context7查询最新最佳实践
- **跨语言项目**: 关注接口一致性和数据流

## 集成工具和资源

### 自动化检查脚本

使用 `scripts/` 目录下的工具：
- `analyze_complexity.py` - 代码复杂度分析
- `security_scan.py` - 安全漏洞扫描
- `performance_check.py` - 性能热点检测

### 参考资源

- **检查清单**: [CHECKLIST.md](references/CHECKLIST.md) - 完整的代码审查要点
- **最佳实践**: [BEST_PRACTICES.md](references/BEST_PRACTICES.md) - 各语言编程规范
- **语言指南**: `references/*-guide.md` - 特定语言的审查要点

## 使用场景

### 何时使用此技能

- **代码审查PR**: Pull Request代码质量检查
- **重构指导**: 代码重构前的问题识别和方案建议
- **技术债务分析**: 识别项目中的技术债务和改进机会
- **安全审计**: 安全漏洞和风险评估
- **性能优化**: 性能瓶颈识别和优化建议
- **代码规范检查**: 团队编码规范一致性检查

### 输入要求

提供以下信息以获得最佳分析效果：
- 完整的源代码文件或代码片段
- 项目背景和用途说明
- 特定的关注点（安全、性能、可维护性等）
- 使用的框架和库版本信息
- 代码运行环境信息

## 输出标准

### 报告质量要求

- **准确性**: 确保指出的问题真实存在
- **可操作性**: 提供具体可执行的修改建议  
- **优先级明确**: 按重要性和紧急性排序问题
- **资源丰富**: 提供相关文档链接和学习资源
- **语言规范**: 使用中文输出，符合团队沟通习惯

### 持续改进

根据使用反馈不断完善：
- 更新检查清单和最佳实践
- 增加新的编程语言支持
- 优化问题检测算法
- 改进报告模板和建议质量