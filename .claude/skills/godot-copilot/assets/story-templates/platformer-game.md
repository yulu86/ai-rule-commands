# 平台跳跃游戏Story模板

## 基本信息

- **游戏名称**：[填写游戏名称]
- **游戏类型**：2D平台跳跃游戏
- **目标平台**：PC、移动端
- **目标用户**：8-35岁，喜欢平台跳跃游戏的玩家

## 游戏概述

### 核心玩法
玩家控制角色在2D平台间跳跃，躲避敌人、收集道具，到达关卡终点。游戏包含多个精心设计的关卡，每个关卡都有独特的挑战和谜题。

### 游戏目标
- 收集每个关卡中的所有星星
- 躲避或击败敌人
- 到达关卡终点的旗帜
- 用最短时间完成关卡

### 特色亮点
- 流畅的角色控制和物理效果
- 多样化的关卡设计和环境主题
- 丰富的敌人和BOSS战
- 道具收集和升级系统
- 隐藏区域和秘密通道

## 详细设计

### 游戏系统

#### 移动系统
- **功能描述**：实现角色基础的左右移动、跳跃、二段跳功能
- **实现方式**：使用CharacterBody2D处理物理，自定义重力和空气阻力
- **相关节点**：CharacterBody2D、CollisionShape2D、AnimationPlayer
- **依赖关系**：依赖输入系统和动画系统

#### 敌人AI系统
- **功能描述**：实现敌人的巡逻、追踪、攻击行为
- **实现方式**：状态机模式，包含Idle、Patrol、Chase、Attack状态
- **相关节点**：Node2D、Area2D、Timer、NavigationServer2D
- **依赖关系**：依赖玩家位置检测系统

#### 道具收集系统
- **功能描述**：管理星星、生命值、能力提升等道具的收集
- **实现方式**：Area2D检测碰撞，信号系统触发收集效果
- **相关节点**：Area2D、CollisionShape2D、AudioStreamPlayer2D
- **依赖关系**：依赖UI显示系统和音效系统

#### 关卡进度系统
- **功能描述**：追踪关卡完成状态、解锁新关卡
- **实现方式**：SaveGame系统存储进度，关卡选择界面
- **相关节点**：Node、CanvasLayer、Button
- **依赖关系**：依赖UI系统和数据持久化系统

### 界面设计

#### 主菜单场景
- **场景结构**：
  ```
  MainMenu (Control)
  ├── Background (Sprite2D)
  ├── Title (Label)
  ├── ButtonsContainer (VBoxContainer)
  │   ├── StartButton (Button)
  │   ├── LevelsButton (Button)
  │   ├── SettingsButton (Button)
  │   └── QuitButton (Button)
  └── VersionLabel (Label)
  ```
- **UI元素**：游戏标题、开始游戏、关卡选择、设置、退出按钮
- **交互逻辑**：按钮点击音效，场景切换动画

#### 游戏HUD
- **场景结构**：
  ```
  HUD (CanvasLayer)
  ├── HealthBar (TextureProgressBar)
  ├── ScoreLabel (Label)
  ├── TimeLabel (Label)
  ├── StarsContainer (HBoxContainer)
  │   ├── Star1 (TextureRect)
  │   ├── Star2 (TextureRect)
  │   └── Star3 (TextureRect)
  └── PauseButton (Button)
  ```
- **HUD设计**：显示生命值、得分、时间、收集的星星数量
- **控制界面**：暂停菜单，包含继续、重新开始、返回主菜单选项

#### 关卡选择界面
- **场景结构**：
  ```
  LevelSelect (Control)
  ├── Background (Sprite2D)
  ├── Title (Label)
  ├── LevelsGrid (GridContainer)
  │   ├── Level1Button (Button)
  │   ├── Level2Button (Button)
  │   └── ...
  ├── BackButton (Button)
  └── StarsLabel (Label)
  ```
- **选项分类**：已解锁关卡、锁定关卡、完成状态
- **配置存储**：关卡解锁状态、最高得分、收集进度

### 角色与对象

#### 玩家角色
- **属性系统**：
  ```gdscript
  @export var max_health: int = 3
  @export var move_speed: float = 300.0
  @export var jump_velocity: float = -400.0
  @export var double_jump_velocity: float = -350.0
  var current_health: int
  var can_double_jump: bool = true
  var is_grounded: bool = false
  ```
- **控制方式**：键盘方向键/WASD移动，空格键跳跃，Shift键冲刺
- **动画状态**：idle、run、jump、fall、double_jump、hurt、death

#### 敌人类型

##### 巡逻兵 (PatrolEnemy)
- **AI行为**：在平台间往返巡逻，发现玩家后追逐
- **属性配置**：移动速度150，视野范围200px，攻击伤害1点
- **生成机制**：在固定位置生成，按预设路径巡逻

##### 飞行兵 (FlyingEnemy)
- **AI行为**：空中飞行，向玩家位置发射子弹
- **属性配置**：飞行速度100，射击间隔2秒，子弹伤害1点
- **生成机制**：在空中位置生成，限制活动范围

##### 跳跃兵 (JumpingEnemy)
- **AI行为**：定时跳跃，落地时产生冲击波
- **属性配置**：跳跃高度150px，跳跃间隔3秒，冲击波伤害1点
- **生成机制**：在平台位置生成，周期性跳跃攻击

#### 道具和收集品

##### 收集星星
- **类型分类**：关卡必需品，每个关卡3颗
- **效果机制**：收集后增加得分，用于解锁新关卡
- **获取方式**：放置在关卡各个位置，有些需要特殊技巧才能到达

##### 生命值提升
- **类型分类**：消耗品，临时增加最大生命值
- **效果机制**：在当前关卡中生命值上限+1，关卡结束后恢复
- **获取方式**：隐藏在秘密区域或作为挑战奖励

##### 能力升级
- **类型分类**：永久升级，提升角色能力
- **效果机制**：增加跳跃高度、移动速度、二段跳次数等
- **获取方式**：收集足够数量的星星后解锁

### 关卡设计

#### 世界1：草原世界 (1-1到1-5)
- **环境主题**：绿色草原、蓝天白云、简易平台
- **难度曲线**：教学关卡，介绍基础机制
- **特色元素**：移动平台、弹簧、简单的敌人配置
- **流程设计**：线性关卡设计，明确的路线指引

##### 关卡1-1：初识草原
- **场景布局**：平缓地形，少量平台，3颗星星位置明显
- **胜利条件**：到达终点旗帜，收集至少1颗星星
- **挑战要素**：2-3个巡逻兵，基础的跳跃挑战
- **流程设计**：直线前进，熟悉基本操作

##### 关卡1-2：云中漫步
- **场景布局**：空中平台较多，高度差较大
- **胜利条件**：到达终点，收集至少2颗星星
- **挑战要素**：飞行兵敌人，需要精确的跳跃时机
- **流程设计**：垂直为主的关卡布局

#### 世界2：沙漠世界 (2-1到2-5)
- **环境主题**：沙漠地形、仙人掌、金字塔、流沙陷阱
- **难度曲线**：引入新敌人和环境陷阱
- **特色元素**：流沙区域、仙人掌刺伤、沙尘暴效果
- **流程设计**：增加探索要素，多条路径可选

#### 世界3：冰雪世界 (3-1到3-5)
- **环境主题**：冰雪覆盖的地面、滑冰效果、雪人敌人
- **难度曲线**：物理效果改变，增加操作难度
- **特色元素**：滑冰物理、雪球滚动、冰锥掉落
- **流程设计**：强调对物理效果的掌握

#### 世界4：火山世界 (4-1到4-5)
- **环境主题**：熔岩、火焰陷阱、岩石平台、火系敌人
- **难度曲线**：高难度挑战，考验综合能力
- **特色元素**：间歇性熔岩喷发、移动岩石平台、火焰喷射器
- **流程设计**：复杂的机关谜题，需要时机的把握

### 技术需求

#### 性能要求
- **帧率目标**：60 FPS
- **内存限制**：最大512MB内存占用
- **加载时间**：场景切换不超过2秒

#### 平台适配
- **输入处理**：
  - PC：键盘WASD/方向键 + 空格键
  - 移动端：虚拟手柄 + 跳跃按钮
  - 手柄：支持Xbox/PlayStation手柄
- **屏幕适配**：支持16:9和16:10屏幕比例
- **性能优化**：移动端降低粒子效果，优化Draw Call

### 数据设计

#### 存档系统
- **进度存档**：当前关卡、解锁世界、最高得分
- **设置存档**：音量控制、屏幕设置、控制配置
- **统计数据**：游戏时间、死亡次数、收集进度

#### 配置数据
- **角色配置**：移动参数、跳跃高度、生命值等
- **敌人配置**：AI参数、攻击模式、移动速度等
- **关卡配置**：平台位置、敌人生成点、道具位置等

## 开发计划

### 第一阶段：核心机制 (2周)
- 实现角色基础移动和跳跃
- 创建基础物理系统
- 实现简单的关卡编辑器
- 基础敌人AI和碰撞检测

### 第二阶段：内容制作 (3周)
- 设计和制作前5个教学关卡
- 实现完整的敌人AI系统
- 添加道具收集机制
- 创建基础UI界面

### 第三阶段：系统完善 (2周)
- 实现存档和进度系统
- 添加音效和背景音乐
- 完善关卡选择和设置界面
- 性能优化和bug修复

### 第四阶段：扩展内容 (3周)
- 制作剩余3个世界(20个关卡)
- 添加Boss战系统
- 实现隐藏要素和秘密区域
- 最终测试和平衡调整

## 测试计划

### 功能测试重点
- 角色控制是否流畅准确
- 敌人AI行为是否符合预期
- 碰撞检测是否精确
- 关卡流程是否合理

### 性能测试重点
- 复杂场景的帧率表现
- 移动设备的内存和CPU占用
- 场景加载时间优化
- 长时间游戏的稳定性

### 用户体验测试
- 新手学习曲线是否平缓
- 难度递进是否合理
- 操作反馈是否及时
- 游戏乐趣是否持续