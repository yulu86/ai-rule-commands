---
name: godot-developer
description: 专业的Godot 2D游戏开发技能，采用模块化TDD开发方法。根据架构设计文档和详细设计文档进行模块化开发，使用测试驱动开发方式确保代码质量。支持自动测试用例生成、模块划分、代码检视提示、Godot API查询、代码调试和问题解决。集成Godot MCP Server工具进行项目运行、调试输出检查、场景编辑和实时测试。适用于Godot 2D游戏项目的完整开发流程。
---

# Godot 2D游戏开发技能

## 核心开发流程

### 1. 项目分析和准备

**必需前置步骤：**
- 确认项目存在架构设计文档和详细设计文档
- 识别设计文档中定义的模块划分
- 定位测试用例文档位置

**工作流程：**
1. 搜索并读取架构设计文档（`*_架构设计*.md`或`architecture*.md`）
2. 搜索并读取详细设计文档（`*_详细设计*.md`或`detail*.md`）
3. 搜索并读取测试用例文档（`*_测试用例*.md`或`test*.md`）

### 2. 模块化TDD开发流程

**第一阶段：测试用例分析**
1. 从测试用例文档中提取当前模块的测试需求
2. 分析测试用例的输入、输出和预期行为
3. 确定测试覆盖的功能点和边界条件

**第二阶段：测试代码编写**
1. 使用Godot的测试框架（如GUT或内置测试系统）
2. 为每个测试用例编写对应的测试代码
3. 确保测试代码的可读性和维护性

**第三阶段：功能实现**
1. 运行测试用例，确认测试失败（TDD的red阶段）
2. 编写最小可行的实现代码使测试通过（green阶段）
3. 运行Godot项目验证实现效果
4. 使用调试工具检查输出和错误信息
5. 重构优化代码结构（refactor阶段）

**第五阶段：调试和问题解决**
1. 使用Godot MCP Server运行项目进行实时测试
2. 检查调试输出和错误信息
3. 使用Godot编辑器进行场景调试
4. 修复发现的问题和bug

**第四阶段：验证和检视**
1. 确保所有测试用例通过
2. 提示用户进行代码检视
3. 处理代码检视反馈

### 3. 模块开发状态管理

**重要原则：**
- **一次只开发一个模块**：完成当前模块并检视通过后，再开始下一个模块
- **严格TDD流程**：不跳过测试阶段，确保代码质量
- **及时API查询**：对不确定的Godot API立即使用context7查询
- **实时调试验证**：使用MCP工具进行项目运行和调试
- **问题主动发现**：运行项目时主动检查和解决潜在问题

**开发检查清单：**
- [ ] 已读取相关设计文档
- [ ] 已识别当前开发模块
- [ ] 已提取模块测试用例
- [ ] 已编写测试代码
- [ ] 已实现功能代码
- [ ] 已运行项目验证效果
- [ ] 已检查和修复调试输出
- [ ] 所有测试用例通过
- [ ] 已提示用户代码检视
- [ ] 检视通过后标记模块完成

## 开发规范

### 测试驱动开发要求
1. **先写测试**：在任何功能代码之前编写测试
2. **失败优先**：确认测试在实现前失败
3. **最小实现**：编写刚好足够通过测试的代码
4. **持续重构**：在保持测试通过的前提下优化代码

### 模块化开发要求
1. **单一职责**：每个模块只负责一个明确的功能域
2. **接口清晰**：模块间通过明确的接口通信
3. **依赖最小**：减少模块间的耦合度
4. **文档同步**：保持代码和设计文档的同步

### 代码质量要求
1. **Godot最佳实践**：遵循Godot的编码规范和最佳实践
2. **性能考虑**：在实现时考虑性能影响
3. **错误处理**：适当的错误处理和边界检查
4. **代码注释**：为复杂逻辑添加必要的注释

## 工具和资源使用

### Godot MCP Server工具
**项目运行和调试：**
- `mcp__godot__run_project` - 运行Godot项目并捕获输出
- `mcp__godot__get_debug_output` - 获取当前调试输出和错误
- `mcp__godot__stop_project` - 停止当前运行的Godot项目
- `mcp__godot__launch_editor` - 启动Godot编辑器

**项目管理和场景编辑：**
- `mcp__godot__get_project_info` - 检索Godot项目元数据
- `mcp__godot__create_scene` - 创建新的Godot场景文件
- `mcp__godot__add_node` - 向现有场景添加节点
- `mcp__godot__save_scene` - 保存对场景文件的更改
- `mcp__godot__load_sprite` - 将精灵加载到Sprite2D节点

### Context7 API查询
当遇到不确定的Godot API时：
```bash
# 使用context7查询Godot文档
skill: "context7"
# 然后搜索相关Godot API文档
```

### 模块开发辅助
- **架构参考**：`references/architecture-patterns.md`
- **TDD指南**：`references/tdd-guidelines.md`
- **调试指南**：`references/debug-guide.md`
- **API速查**：使用context7实时查询

## 错误处理和调试

### 实时调试工作流程
**每次代码修改后的标准流程：**
1. 运行项目：`mcp__godot__run_project`
2. 检查调试输出：`mcp__godot__get_debug_output`
3. 分析错误信息和警告
4. 修复问题后重新运行验证
5. 停止项目：`mcp__godot__stop_project`

### 常见问题处理
1. **运行时错误**：
   - 使用`get_debug_output`检查错误信息
   - 分析错误堆栈定位问题代码
   - 修复后立即运行验证

2. **测试失败**：
   - 检查测试逻辑和实现代码
   - 使用调试工具验证运行状态

3. **架构冲突**：
   - 对照设计文档调整实现
   - 运行项目验证架构合理性

4. **API使用错误**：
   - 使用context7查询正确用法
   - 测试API调用的实际效果

5. **性能问题**：
   - 使用Godot的性能分析工具
   - 运行项目测试性能表现

### 调试工具使用指南

**调试输出分析：**
```bash
# 获取调试输出
mcp__godot__get_debug_output
# 运行项目并监控输出
mcp__godot__run_project --projectPath="项目路径"
```

**场景调试：**
- 使用`launch_editor`打开编辑器
- 使用`create_scene`创建测试场景
- 使用`add_node`添加调试节点
- 使用`save_scene`保存调试状态

**实时测试：**
- 修改代码后立即运行项目验证
- 使用调试输出检查运行状态
- 通过编辑器可视化调试问题

## 输出标准

### 代码交付
- 完整的模块实现代码
- 对应的测试代码
- 更新的设计文档（如有变更）

### 文档交付
- 模块开发报告
- 测试执行结果
- 代码检视反馈处理

### 质量保证
- 所有测试用例通过
- 代码符合Godot规范
- 遵循架构设计原则

## 使用时机

**在以下情况下使用此技能：**
1. 需要根据设计文档开发Godot 2D游戏模块
2. 需要使用TDD方法进行高质量开发
3. 需要模块化开发复杂游戏系统
4. 需要确保代码质量和测试覆盖率
5. 需要结构化的游戏开发流程

**输入要求：**
- 存在架构设计文档和详细设计文档
- 明确的模块划分定义
- 完整的测试用例定义
- Godot项目环境