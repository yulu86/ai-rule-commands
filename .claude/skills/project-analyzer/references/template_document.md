# 设计文档模板指南

## 文档结构规范

根据用户文档规范，设计文档应遵循以下结构：

### 目录命名规范
```
docs/
├── {目录两位数序号}_{中文目录主题}/
│   ├── {文档两位数序号}_{中文文档名称}.md
│   ├── {文档两位数序号}_{中文文档名称}.md
│   └── ...
```

### 序号规则
- 目录序号: 01, 02, 03... 自增
- 文档序号: 01, 02, 03... 每个目录内重新开始
- 只使用两位数，不足补零

## 设计文档模板

### 基础模板结构
```markdown
# {项目名称} - {文档类型}

## 1. 项目概述

### 1.1 项目背景
- 项目起源和目标
- 解决的核心问题
- 预期价值和影响

### 1.2 项目范围
- 功能边界
- 技术范围
- 用户群体

### 1.3 技术栈概览
- 主要技术框架
- 开发语言
- 部署环境

## 2. 系统架构设计

### 2.1 架构模式
- 选择的架构模式及理由
- 架构层次划分
- 组件关系图

### 2.2 核心模块设计
- 模块划分原则
- 模块职责定义
- 模块间交互方式

### 2.3 数据流设计
- 数据流向图
- 关键数据处理流程
- 数据验证和转换

## 3. 详细设计

### 3.1 核心功能模块
- 功能详述
- 实现方案
- 关键算法

### 3.2 接口设计
- API接口规范
- 数据格式定义
- 错误处理机制

### 3.3 数据库设计
- 数据模型
- 表结构设计
- 关系设计

## 4. 非功能性需求

### 4.1 性能要求
- 响应时间
- 吞吐量
- 并发处理能力

### 4.2 安全性设计
- 身份认证
- 权限控制
- 数据加密

### 4.3 可扩展性
- 水平扩展能力
- 模块扩展机制
- 配置管理

## 5. 部署和运维

### 5.1 部署架构
- 环境规划
- 部署流程
- 监控策略

### 5.2 运维管理
- 日志管理
- 监控告警
- 故障恢复

## 6. 附录

### 6.1 技术选型对比
### 6.2 关键决策记录
### 6.3 参考文档
```

## 分析报告模板

### 项目分析报告结构
```markdown
# {项目名称} - 逆向分析报告

## 执行摘要
- 分析目的和方法
- 主要发现
- 核心建议

## 项目概况
- 项目基本信息
- 技术栈识别
- 项目规模评估

## 架构分析
- 架构模式识别
- 模块组织分析
- 依赖关系梳理

## 代码质量评估
- 设计模式使用情况
- 代码复杂度分析
- 测试覆盖率

## 改进建议
- 架构优化建议
- 代码质量改进
- 技术债务处理

## 结论
- 项目成熟度评估
- 风险识别
- 后续行动计划
```

## 文档生成规则

### 自动化生成原则
1. **基于分析结果**: 所有文档内容基于实际代码分析
2. **结构标准化**: 遵循统一的文档结构
3. **信息分层**: 重要信息优先，细节信息分层展示
4. **可读性优先**: 使用清晰的标题、列表和表格

### 内容生成策略

#### 项目信息提取
```python
# 从配置文件提取基本信息
def extract_project_info():
    return {
        "name": get_project_name(),
        "type": detect_project_type(),
        "framework": identify_framework(),
        "language": detect_language()
    }
```

#### 架构模式识别
```python
# 识别架构模式
def identify_architecture_patterns():
    patterns = []

    # 检查目录结构
    if has_mvc_structure():
        patterns.append("MVC")

    # 检查微服务特征
    if has_microservice_indicators():
        patterns.append("Microservices")

    return patterns
```

#### 设计模式提取
```python
# 提取设计模式实例
def extract_design_patterns():
    patterns = {
        "creational": [],
        "structural": [],
        "behavioral": []
    }

    # 分析代码中的模式实例
    for code_file in source_files:
        file_patterns = analyze_patterns(code_file)
        merge_patterns(patterns, file_patterns)

    return patterns
```

### 模板变量定义

#### 项目基本信息变量
- `{project_name}`: 项目名称
- `{project_type}`: 项目类型
- `{framework}`: 主要框架
- `{language}`: 编程语言
- `{generation_time}`: 生成时间

#### 分析结果变量
- `{architecture_patterns}`: 架构模式列表
- `{design_patterns}`: 设计模式详情
- `{structure_analysis}`: 结构分析结果
- `{quality_metrics}`: 质量指标

#### 建议和改进变量
- `{recommendations}`: 改进建议
- `{technical_debt}`: 技术债务分析
- `{best_practices}`: 最佳实践建议

## 文档质量标准

### 内容完整性
- [ ] 项目概述完整
- [ ] 架构分析详细
- [ ] 设计模式识别准确
- [ ] 改进建议具体可行

### 结构清晰度
- [ ] 层次结构合理
- [ ] 标题语义明确
- [ ] 列表和表格使用恰当
- [ ] 代码示例清晰

### 语言表达
- [ ] 专业术语准确
- [ ] 语言简洁明了
- [ ] 逻辑连贯
- [ ] 符合中文表达习惯

### 技术准确性
- [ ] 技术识别准确
- [ ] 模式识别正确
- [ ] 建议具有可操作性
- [ ] 分析结论合理

## 自定义模板扩展

### 模板定制原则
1. **行业适配**: 根据不同行业调整模板
2. **技术栈适配**: 针对特定技术栈优化
3. **团队规范**: 符合团队文档习惯
4. **可扩展性**: 支持模块化扩展

### 模板扩展方式

#### 添加新章节
```markdown
## 7. 特定分析章节

### 7.1 技术专项分析
{specific_analysis_content}

### 7.2 行业规范检查
{industry_compliance_content}
```

#### 自定义分析模块
```python
def custom_analysis_module(analysis_results):
    """自定义分析模块"""
    # 特定领域分析逻辑
    return {
        "custom_metrics": calculate_custom_metrics(),
        "domain_specific_patterns": detect_domain_patterns()
    }
```

## 文档维护策略

### 版本管理
- 文档版本与代码版本同步
- 变更记录维护
- 历史版本归档

### 更新机制
- 代码变更触发文档更新
- 定期分析检查
- 人工审核确认

### 质量保证
- 文档内容验证
- 链接和引用检查
- 格式规范验证